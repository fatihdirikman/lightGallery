{"version":3,"file":"lightgallery.es5.js","sources":["../src/lgQuery.ts","../src/lg-utils.ts","../src/lg-defaults.ts","../src/lightgallery.ts"],"sourcesContent":["interface Offset {\n    left: number;\n    top: number;\n}\n\n(function () {\n    if (typeof window.CustomEvent === 'function') return false;\n\n    function CustomEvent(event: string, params: any) {\n        params = params || { bubbles: false, cancelable: false, detail: null };\n        const evt = document.createEvent('CustomEvent');\n        evt.initCustomEvent(\n            event,\n            params.bubbles,\n            params.cancelable,\n            params.detail,\n        );\n        return evt;\n    }\n\n    window.CustomEvent = CustomEvent as any;\n})();\n(function () {\n    if (!Element.prototype.matches) {\n        Element.prototype.matches =\n            (Element.prototype as any).msMatchesSelector ||\n            Element.prototype.webkitMatchesSelector;\n    }\n})();\nexport class lgQuery {\n    static eventListeners: { [key: string]: any[] } = {};\n    private selector: any;\n    private firstElement: any;\n    private cssVenderPrefixes: string[] = [\n        'TransitionDuration',\n        'TransitionTimingFunction',\n        'Transform',\n        'Transition',\n    ];\n    constructor(selector: string | Element) {\n        this.selector = this._getSelector(selector);\n        this.firstElement = this._getFirstEl();\n        return this;\n    }\n\n    private _getSelector(\n        selector: string | Element,\n        context: Element | Document = document,\n    ): Element | null | NodeListOf<Element> {\n        if (typeof selector !== 'string') {\n            return selector;\n        }\n        context = context || document;\n        const fl = selector.substring(0, 1);\n        if (fl === '#') {\n            return context.querySelector(selector);\n        } else {\n            return context.querySelectorAll(selector);\n        }\n    }\n\n    private _each(\n        func: (\n            elements: Element | NodeListOf<Element> | null,\n            index: number,\n        ) => void,\n    ): this {\n        if (!this.selector) {\n            return this;\n        }\n        if (this.selector.length !== undefined) {\n            [].forEach.call(this.selector, func);\n        } else {\n            func(this.selector, 0);\n        }\n        return this;\n    }\n\n    private _setCssVendorPrefix(\n        el: any,\n        cssProperty: string,\n        value?: string | number,\n    ): void {\n        const property = cssProperty.replace(/-([a-z])/gi, function (\n            s,\n            group1,\n        ) {\n            return group1.toUpperCase();\n        });\n        if (this.cssVenderPrefixes.indexOf(property) !== -1) {\n            el.style[\n                property.charAt(0).toLowerCase() + property.slice(1)\n            ] = value;\n            el.style['webkit' + property] = value;\n            el.style['moz' + property] = value;\n            el.style['ms' + property] = value;\n            el.style['o' + property] = value;\n        } else {\n            el.style[property] = value;\n        }\n    }\n\n    private _getFirstEl() {\n        if (this.selector && this.selector.length !== undefined) {\n            return this.selector[0];\n        } else {\n            return this.selector;\n        }\n    }\n\n    private isEventMatched(event: string, eventName: string): boolean {\n        const eventNamespace = eventName.split('.');\n        return event\n            .split('.')\n            .filter((e) => e)\n            .every((e) => {\n                return eventNamespace.indexOf(e) !== -1;\n            });\n    }\n\n    attr(attr: string): string;\n    attr(attr: string, value: string | number | boolean): this;\n    attr(attr: string, value?: string | number | boolean): string | this {\n        if (value === undefined) {\n            if (!this.firstElement) {\n                return '';\n            }\n            return this.firstElement.getAttribute(attr);\n        }\n        this._each((el: any) => {\n            el.setAttribute(attr, value);\n        });\n        return this;\n    }\n\n    find(selector: any): lgQuery {\n        return LG(this._getSelector(selector, this.selector));\n    }\n\n    first(): lgQuery {\n        if (this.selector.length !== undefined) {\n            return LG(this.selector[0]);\n        } else {\n            return LG(this.selector);\n        }\n    }\n\n    eq(index: number): lgQuery {\n        return LG(this.selector[index]);\n    }\n\n    parent(): lgQuery {\n        return LG(this.selector.parentElement);\n    }\n\n    get(): HTMLElement {\n        return this._getFirstEl();\n    }\n\n    removeAttr(attr: string): this {\n        this._each((el: any) => {\n            el.removeAttribute(attr);\n        });\n        return this;\n    }\n\n    wrap(className: string): this {\n        if (!this.firstElement) {\n            return this;\n        }\n        const wrapper = document.createElement('div');\n        wrapper.className = className;\n        this.firstElement.parentNode.insertBefore(wrapper, this.firstElement);\n        this.firstElement.parentNode.removeChild(this.firstElement);\n        wrapper.appendChild(this.firstElement);\n        return this;\n    }\n\n    addClass(classNames = ''): this {\n        this._each((el: any) => {\n            // IE doesn't support multiple arguments\n            classNames.split(' ').forEach((className) => {\n                el.classList.add(className);\n            });\n        });\n        return this;\n    }\n\n    removeClass(classNames: string): this {\n        this._each((el: any) => {\n            // IE doesn't support multiple arguments\n            classNames.split(' ').forEach((className) => {\n                el.classList.remove(className);\n            });\n        });\n        return this;\n    }\n\n    hasClass(className: string): boolean {\n        if (!this.firstElement) {\n            return false;\n        }\n        return this.firstElement.classList.contains(className);\n    }\n    hasAttribute(attribute: string): boolean {\n        if (!this.firstElement) {\n            return false;\n        }\n        return this.firstElement.hasAttribute(attribute);\n    }\n    toggleClass(className: string): this {\n        if (!this.firstElement) {\n            return this;\n        }\n        if (this.hasClass(className)) {\n            this.removeClass(className);\n        } else {\n            this.addClass(className);\n        }\n        return this;\n    }\n\n    css(property: string, value?: string | number): this {\n        this._each((el: any) => {\n            this._setCssVendorPrefix(el, property, value);\n        });\n        return this;\n    }\n    // Need to pass separate namespaces for separate elements\n    on(events: string, listener: (e: any) => void): this {\n        if (!this.selector) {\n            return this;\n        }\n        events.split(' ').forEach((event: string) => {\n            if (!Array.isArray(lgQuery.eventListeners[event])) {\n                lgQuery.eventListeners[event] = [];\n            }\n            lgQuery.eventListeners[event].push(listener);\n            this.selector.addEventListener(event.split('.')[0], listener);\n        });\n\n        return this;\n    }\n    // @todo - test this\n    once(event: string, listener: (e: any) => void): this {\n        this.on(event, () => {\n            this.off(event);\n            listener(event);\n        });\n        return this;\n    }\n    off(event: string): this {\n        if (!this.selector) {\n            return this;\n        }\n        Object.keys(lgQuery.eventListeners).forEach((eventName) => {\n            if (this.isEventMatched(event, eventName)) {\n                lgQuery.eventListeners[eventName].forEach((listener) => {\n                    this.selector.removeEventListener(\n                        eventName.split('.')[0],\n                        listener,\n                    );\n                });\n                lgQuery.eventListeners[eventName] = [];\n            }\n        });\n\n        return this;\n    }\n    trigger(event: string, detail?: any): this {\n        if (!this.firstElement) {\n            return this;\n        }\n\n        const customEvent = new CustomEvent(event.split('.')[0], {\n            detail: detail || null,\n        });\n        this.firstElement.dispatchEvent(customEvent);\n        return this;\n    }\n\n    // Does not support IE\n    load(url: string): this {\n        fetch(url).then((res) => {\n            this.selector.innerHTML = res;\n        });\n        return this;\n    }\n\n    html(): string;\n    html(html: string): this;\n    html(html?: string): string | this {\n        if (html === undefined) {\n            if (!this.firstElement) {\n                return '';\n            }\n            return this.firstElement.innerHTML;\n        }\n        this._each((el: any) => {\n            el.innerHTML = html;\n        });\n        return this;\n    }\n    append(html: string | HTMLElement): this {\n        this._each((el: any) => {\n            if (typeof html === 'string') {\n                el.insertAdjacentHTML('beforeend', html);\n            } else {\n                el.appendChild(html);\n            }\n        });\n        return this;\n    }\n    prepend(html: string): this {\n        this._each((el: any) => {\n            el.insertAdjacentHTML('afterbegin', html);\n        });\n        return this;\n    }\n    remove(): this {\n        this._each((el: any) => {\n            el.parentNode.removeChild(el);\n        });\n        return this;\n    }\n    empty(): this {\n        this._each((el: any) => {\n            el.innerHTML = '';\n        });\n        return this;\n    }\n    // Supports only window\n    scrollTop(): number;\n    scrollTop(scrollTop: number): this;\n    scrollTop(scrollTop?: number): number | this {\n        if (scrollTop !== undefined) {\n            document.body.scrollTop = scrollTop;\n            document.documentElement.scrollTop = scrollTop;\n            return this;\n        } else {\n            return (\n                window.pageYOffset ||\n                document.documentElement.scrollTop ||\n                document.body.scrollTop ||\n                0\n            );\n        }\n    }\n    // Supports only window\n    scrollLeft(): number;\n    scrollLeft(scrollLeft?: number): this;\n    scrollLeft(scrollLeft?: number): number | this {\n        if (scrollLeft !== undefined) {\n            document.body.scrollLeft = scrollLeft;\n            document.documentElement.scrollLeft = scrollLeft;\n            return this;\n        } else {\n            return (\n                window.pageXOffset ||\n                document.documentElement.scrollLeft ||\n                document.body.scrollLeft ||\n                0\n            );\n        }\n    }\n    offset(): Offset {\n        if (!this.firstElement) {\n            return {\n                left: 0,\n                top: 0,\n            };\n        }\n        const rect = this.firstElement.getBoundingClientRect();\n        const bodyMarginLeft = LG('body').style().marginLeft;\n\n        // Minus body margin - https://stackoverflow.com/questions/30711548/is-getboundingclientrect-left-returning-a-wrong-value\n        return {\n            left: rect.left - parseFloat(bodyMarginLeft) + this.scrollLeft(),\n            top: rect.top + this.scrollTop(),\n        };\n    }\n    style(): CSSStyleDeclaration {\n        if (!this.firstElement) {\n            return {} as CSSStyleDeclaration;\n        }\n        return (\n            this.firstElement.currentStyle ||\n            window.getComputedStyle(this.firstElement)\n        );\n    }\n    // Width without padding and border even if box-sizing is used.\n    width(): number {\n        const style = this.style();\n        return (\n            this.firstElement.clientWidth -\n            parseFloat(style.paddingLeft) -\n            parseFloat(style.paddingRight)\n        );\n    }\n    // Height without padding and border even if box-sizing is used.\n    height(): number {\n        const style = this.style();\n        return (\n            this.firstElement.clientHeight -\n            parseFloat(style.paddingTop) -\n            parseFloat(style.paddingBottom)\n        );\n    }\n}\n\nexport function LG(selector: any): lgQuery {\n    return new lgQuery(selector);\n}\n","import { LG } from './lgQuery';\nimport { VideoInfo } from './lightgallery';\nexport interface ImageSize {\n    width: number;\n    height: number;\n}\n\nexport interface DynamicItem {\n    src: string;\n    alt: string;\n    // @desc Video title\n    title: string;\n    subHtml: string;\n    subHtmlUrl: string;\n    html: string;\n    video: string;\n    poster: string;\n    slideName: string;\n    responsive: string;\n    srcset: string;\n    sizes: string;\n    iframe: string;\n    downloadUrl: string | boolean;\n    width: string;\n    facebookShareUrl: string;\n    tweetText: string;\n    witterShareUrl: string;\n    googleplusUhareUrl: string;\n    pinterestShareUrl: string;\n    pinterestText: string;\n    __slideVideoInfo?: VideoInfo;\n    [key: string]: any;\n}\n\nconst defaultDynamicOptions = [\n    'src',\n    'subHtml',\n    'subHtmlUrl',\n    'html',\n    'video',\n    'poster',\n    'slideName',\n    'responsive',\n    'srcset',\n    'sizes',\n    'iframe',\n    'downloadUrl',\n    'width',\n    'facebookShareUrl',\n    'tweetText',\n    'witterShareUrl',\n    'googleplusUhareUrl',\n    'pinterestShareUrl',\n    'pinterestText',\n];\n\n// Convert html data-attribute to camalcase\nexport function convertToData(attr: string): string {\n    // FInd a way for lgsize\n    if (attr === 'href') {\n        return 'src';\n    }\n    attr = attr.replace('data-', '');\n    attr = attr.charAt(0).toLowerCase() + attr.slice(1);\n    attr = attr.replace(/-([a-z])/g, (g) => g[1].toUpperCase());\n\n    return attr;\n}\n\nconst utils = {\n    /**\n     * @desc get possible width and height from the lgSize attribute. Used for ZoomFromImage option\n     * @param {jQuery Element} $el\n     * @returns {Object} Computed Width and Computed Height\n     */\n    getSize(el: HTMLElement): ImageSize | undefined {\n        const LGel = LG(el);\n        const lgSize = LGel.attr('data-lg-size');\n\n        if (!lgSize) {\n            return;\n        }\n\n        const size = lgSize.split('-');\n\n        const width = parseInt(size[0], 10);\n        const height = parseInt(size[1], 10);\n\n        const wWidth = document.body.clientWidth;\n        const wHeight = window.innerHeight;\n\n        const maxWidth = Math.min(wWidth, width);\n        const maxHeight = Math.min(wHeight, height);\n\n        const srcWidth = LGel.width();\n        const srcHeight = LGel.height();\n\n        const ratio = Math.min(maxWidth / srcWidth, maxHeight / srcHeight);\n\n        return {\n            width: srcWidth * ratio,\n            height: srcHeight * ratio,\n        };\n    },\n\n    /**\n     * @desc Get transform value based on the imageSize. Used for ZoomFromImage option\n     * @param {jQuery Element}\n     * @returns {String} Transform CSS string\n     */\n    getTransform(el: HTMLElement, imageSize?: ImageSize): string | undefined {\n        if (!imageSize) {\n            return;\n        }\n        const LGel = LG(el);\n\n        const wWidth = document.body.clientWidth;\n\n        // using innerWidth to include mobile safari bottom bar\n        const wHeight = window.innerHeight;\n\n        const elWidth = LGel.width();\n        const elHeight = LGel.height();\n\n        const elStyle = LGel.style();\n\n        let x =\n            (wWidth - elWidth) / 2 -\n            (LGel.offset().left +\n                parseFloat(elStyle.paddingLeft) +\n                parseFloat(elStyle.borderLeft));\n        let y =\n            (wHeight - elHeight) / 2 -\n            (LGel.offset().top +\n                parseFloat(elStyle.paddingTop) +\n                parseFloat(elStyle.borderTop)) +\n            LG(window).scrollTop();\n\n        const scX = elWidth / imageSize.width;\n        const scY = elHeight / imageSize.height;\n\n        return (\n            'translate3d(' +\n            (x *= -1) +\n            'px, ' +\n            (y *= -1) +\n            'px, 0) scale3d(' +\n            scX +\n            ', ' +\n            scY +\n            ', 1)'\n        );\n    },\n\n    getIframeMarkup(src: string, iframeMaxWidth: number | string): string {\n        return `<div class=\"lg-video-cont lg-has-iframe\" style=\"max-width:${iframeMaxWidth}\">\n                    <div class=\"lg-video\">\n                        <iframe class=\"lg-object\" frameborder=\"0\" src=\"${src}\"  allowfullscreen=\"true\"></iframe>\n                    </div>\n                </div>`;\n    },\n\n    // Get src from responsive src\n    getResponsiveSrc(srcItms: string[]): string {\n        const rsWidth = [];\n        const rsSrc = [];\n        let src = '';\n        for (let i = 0; i < srcItms.length; i++) {\n            const _src = srcItms[i].split(' ');\n\n            // Manage empty space\n            if (_src[0] === '') {\n                _src.splice(0, 1);\n            }\n\n            rsSrc.push(_src[0]);\n            rsWidth.push(_src[1]);\n        }\n\n        const wWidth = window.innerWidth;\n        for (let j = 0; j < rsWidth.length; j++) {\n            if (parseInt(rsWidth[j], 10) > wWidth) {\n                src = rsSrc[j];\n                break;\n            }\n        }\n        return src;\n    },\n\n    getVideoPosterMarkup(_poster: string, _isVideo?: VideoInfo): string {\n        let videoClass = '';\n        if (_isVideo && _isVideo.youtube) {\n            videoClass = 'lg-has-youtube';\n        } else if (_isVideo && _isVideo.vimeo) {\n            videoClass = 'lg-has-vimeo';\n        } else {\n            videoClass = 'lg-has-html5';\n        }\n\n        return `<div class=\"lg-video-cont ${videoClass}\"><div class=\"lg-video\"><span class=\"lg-video-play\"></span><img class=\"lg-object lg-has-poster\" src=\"${_poster}\" /></div></div>`;\n    },\n\n    /**\n     * @desc Create dynamic elements array from gallery items when dynamic option is false\n     * It helps to avoid frequent DOM interaction\n     * and avoid multiple checks for dynamic elments\n     *\n     * @returns {Array} dynamicEl\n     */\n    getDynamicOptions(\n        items: any,\n        extraProps: string[],\n        getCaptionFromTitleOrAlt: boolean,\n    ): DynamicItem[] {\n        const dynamicElements: DynamicItem[] = [];\n        const availableDynamicOptions = [\n            ...defaultDynamicOptions,\n            ...extraProps,\n        ];\n        [].forEach.call(items, (item: HTMLElement) => {\n            const dynamicEl: DynamicItem = {} as DynamicItem;\n            for (let i = 0; i < item.attributes.length; i++) {\n                const attr = item.attributes[i];\n                if (attr.specified) {\n                    const dynamicAttr = convertToData(attr.name);\n                    let label = '';\n                    if (availableDynamicOptions.indexOf(dynamicAttr) > -1) {\n                        label = dynamicAttr;\n                    }\n                    if (label) {\n                        (dynamicEl as any)[label] = attr.value;\n                    }\n                }\n            }\n            const currentItem = LG(item);\n            const alt = currentItem.find('img').first().attr('alt');\n            const title = currentItem.attr('title');\n            if (getCaptionFromTitleOrAlt && !dynamicEl.subHtml) {\n                dynamicEl.subHtml = title || alt || '';\n            }\n            dynamicEl.alt = alt || title || '';\n            dynamicElements.push(dynamicEl);\n        });\n        return dynamicElements;\n    },\n};\n\nexport default utils;\n","import { DynamicItem } from './lg-utils';\n\nexport interface Defaults {\n    /**\n     * @desc Type of transition between images. lightGallery comes with lots of transition effects such;\n     * @default 'lg-slide';\n     */\n    mode:\n        | 'lg-slide'\n        | 'lg-fade'\n        | 'lg-zoom-in'\n        | 'lg-zoom-in-big'\n        | 'lg-zoom-out'\n        | 'lg-zoom-out-big'\n        | 'lg-zoom-out-in'\n        | 'lg-zoom-in-out'\n        | 'lg-soft-zoom'\n        | 'lg-scale-up'\n        | 'lg-slide-circular'\n        | 'lg-slide-circular-vertical'\n        | 'lg-slide-vertical'\n        | 'lg-slide-vertical-growth'\n        | 'lg-slide-skew-only'\n        | 'lg-slide-skew-only-rev'\n        | 'lg-slide-skew-only-y'\n        | 'lg-slide-skew-only-y-rev'\n        | 'lg-slide-skew'\n        | 'lg-slide-skew-rev'\n        | 'lg-slide-skew-cross'\n        | 'lg-slide-skew-cross-rev'\n        | 'lg-slide-skew-ver'\n        | 'lg-slide-skew-ver-rev'\n        | 'lg-slide-skew-ver-cross'\n        | 'lg-slide-skew-ver-cross-rev'\n        | 'lg-lollipop'\n        | 'lg-lollipop-rev'\n        | 'lg-rotate'\n        | 'lg-rotate-rev'\n        | 'lg-tube';\n    easing: string;\n    cssEasing: string;\n    speed: number;\n    height: string;\n    width: string;\n    addClass: string;\n    startClass: string;\n    backdropDuration: number;\n\n    container: HTMLElement;\n\n    // Zoom from image animation duration\n    startAnimationDuration: number;\n\n    /**\n     * @desc - Zoom from image effect - Supports only images\n     * Will be false if dynamic option is enabled or galleryID found in the URL\n     * Setting startClass will be empty if zoomFromImage is true to avoid css conflicts.\n     *\n     */\n    zoomFromImage: boolean;\n\n    // Set 0, if u don't want to hide the controls\n    hideBarsDelay: number;\n    showBarsAfter: number;\n\n    supportLegacyBrowser: boolean;\n\n    // If true sub-html will also be hidden along with controls and toolbar if hideBarDelay is more than 0\n    hideSubHtml: boolean;\n\n    useLeft: boolean;\n\n    // aria-labelledby attribute fot gallery\n    ariaLabelledby: string;\n\n    //aria-describedby attribute for gallery\n    ariaDescribedby: string;\n\n    closable: boolean;\n    closeOnTap: boolean;\n    loop: boolean;\n    escKey: boolean;\n    keyPress: boolean;\n    controls: boolean;\n    slideEndAnimatoin: boolean;\n    hideControlOnEnd: boolean;\n    mousewheel: boolean;\n\n    getCaptionFromTitleOrAlt: boolean;\n\n    // .lg-item || '.lg-sub-html'\n    appendSubHtmlTo: string;\n\n    subHtmlSelectorRelative: boolean;\n\n    /**\n     * @desc number of preload slides\n     * will exicute only after the current slide is fully loaded.\n     *\n     * @ex you clicked on 4th image and if preload = 1 then 3rd slide and 5th\n     * slide will be loaded in the background after the 4th slide is fully loaded..\n     * if preload is 2 then 2nd 3rd 5th 6th slides will be preloaded.. ... ...\n     *\n     */\n    preload: number;\n    numberOfSlideItemsInDom: number;\n    showAfterLoad: boolean;\n    selector: string;\n    selectWithin: string;\n    nextHtml: string;\n    prevHtml: string;\n\n    // 0, 1\n    index: false;\n\n    iframeMaxWidth: string;\n\n    download: boolean;\n    counter: boolean;\n    appendCounterTo: string;\n\n    swipeThreshold: number;\n    enableSwipe: boolean;\n    enableDrag: boolean;\n\n    dynamic: false;\n    dynamicEl: DynamicItem[];\n\n    extraProps: string[];\n\n    galleryId: number;\n    customSlideName: boolean;\n\n    // Thumbnail plugin\n    exThumbImage: string;\n}\n\nexport const defaults: Defaults = {\n    mode: 'lg-slide',\n\n    // Ex : 'ease'\n    cssEasing: 'ease',\n\n    //'for jquery animation'\n    easing: 'linear',\n    speed: 400,\n    height: '100%',\n    width: '100%',\n    addClass: '',\n    startClass: 'lg-start-zoom',\n    backdropDuration: 150,\n\n    container: document.body,\n\n    // Zoom from image animation duration\n    startAnimationDuration: 350,\n\n    /**\n     * @desc - Zoom from image effect - Supports only images\n     * Will be false if dynamic option is enabled or galleryID found in the URL\n     * Setting startClass will be empty if zoomFromImage is true to avoid css conflicts.\n     *\n     */\n    zoomFromImage: true,\n\n    // Set 0, if u don't want to hide the controls\n    hideBarsDelay: 2000,\n    showBarsAfter: 0,\n\n    supportLegacyBrowser: true,\n\n    // If true sub-html will also be hidden along with controls and toolbar if hideBarDelay is more than 0\n    hideSubHtml: true,\n\n    useLeft: false,\n\n    // aria-labelledby attribute fot gallery\n    ariaLabelledby: '',\n\n    //aria-describedby attribute for gallery\n    ariaDescribedby: '',\n\n    closable: true,\n    closeOnTap: true,\n    loop: true,\n    escKey: true,\n    keyPress: true,\n    controls: true,\n    slideEndAnimatoin: true,\n    hideControlOnEnd: false,\n    mousewheel: false,\n\n    getCaptionFromTitleOrAlt: true,\n\n    // .lg-item || '.lg-sub-html'\n    appendSubHtmlTo: '.lg-sub-html',\n\n    subHtmlSelectorRelative: false,\n\n    /**\n     * @desc number of preload slides\n     * will exicute only after the current slide is fully loaded.\n     *\n     * @ex you clicked on 4th image and if preload = 1 then 3rd slide and 5th\n     * slide will be loaded in the background after the 4th slide is fully loaded..\n     * if preload is 2 then 2nd 3rd 5th 6th slides will be preloaded.. ... ...\n     *\n     */\n    preload: 1,\n    numberOfSlideItemsInDom: 3,\n    showAfterLoad: true,\n    selector: '',\n    selectWithin: '',\n    nextHtml: '',\n    prevHtml: '',\n\n    // 0, 1\n    index: false,\n\n    iframeMaxWidth: '100%',\n\n    download: true,\n    counter: true,\n    appendCounterTo: '.lg-toolbar',\n\n    swipeThreshold: 50,\n    enableSwipe: true,\n    enableDrag: true,\n\n    dynamic: false,\n    dynamicEl: [],\n    extraProps: [],\n\n    galleryId: 1,\n    customSlideName: false,\n\n    exThumbImage: '',\n};\n","declare global {\n    interface Window {\n        lgModules: any;\n        lightGallery: (\n            el: HTMLElement,\n            options: Partial<Defaults>,\n        ) => LightGallery | undefined;\n    }\n}\n\ndeclare let picturefill: any;\n\nimport utils, { DynamicItem, ImageSize } from './lg-utils';\nimport { LG, lgQuery } from './lgQuery';\ndeclare global {\n    interface Window {\n        LG: typeof LG;\n    }\n}\nwindow.LG = LG;\n\n// @ref - https://stackoverflow.com/questions/3971841/how-to-resize-images-proportionally-keeping-the-aspect-ratio\n// @ref - https://2ality.com/2017/04/setting-up-multi-platform-packages.html\nimport { Defaults, defaults } from './lg-defaults';\n\ntype SlideDirection = 'next' | 'prev';\nexport interface Coords {\n    pageX: number;\n    pageY: number;\n}\nexport interface VideoInfo {\n    html5?: boolean;\n    youtube?: string[];\n    vimeo?: string[];\n    wistia?: string[];\n    dailymotion?: string[];\n}\n\nlet lgId = 0;\nwindow.lgModules = window.lgModules || {};\n\nexport class LightGallery {\n    public s: Defaults;\n    public galleryItems: DynamicItem[];\n    public lgId: number;\n    public el: HTMLElement;\n    public LGel: lgQuery;\n    public lgOpened = false;\n\n    public index = 0;\n\n    // lightGallery modules\n    public modules: any = {};\n\n    // false when lightGallery load first slide content;\n    public lGalleryOn = false;\n\n    // True when a slide animation is in progress\n    public lgBusy = false;\n\n    // Type of touch action - {swipe, zoomSwipe, pinch}\n    public touchAction?: 'swipe' | 'zoomSwipe' | 'pinch';\n\n    // Direction of swipe/drag - {horizontal, vertical}\n    public swipeDirection?: 'horizontal' | 'vertical';\n\n    // Timeout function for hiding controls;\n    public hideBarTimeout: any;\n\n    public currentItemsInDom: string[] = [];\n\n    public outer!: lgQuery;\n\n    public items: any;\n\n    // Scroll top value before lightGallery is opened\n    private prevScrollTop = 0;\n\n    private zoomFromImage!: boolean;\n    $items: any;\n\n    constructor(element: HTMLElement, options: Partial<Defaults>) {\n        lgId++;\n        this.lgId = lgId;\n\n        this.el = element;\n        this.LGel = LG(element);\n\n        // lightGallery settings\n        this.s = Object.assign({}, defaults, options);\n\n        // When using dynamic mode, ensure dynamicEl is an array\n        if (\n            this.s.dynamic &&\n            this.s.dynamicEl !== undefined &&\n            !Array.isArray(this.s.dynamicEl)\n        ) {\n            throw 'When using dynamic mode, you must also define dynamicEl as an Array.';\n        }\n\n        if (this.s.slideEndAnimatoin) {\n            this.s.hideControlOnEnd = false;\n        }\n\n        // Need to disable zoomFromImage if gallery is opened from url (Hash plugin)\n        // And reset it on close to get the correct value next time\n        this.zoomFromImage = this.s.zoomFromImage;\n\n        // Gallery items\n        this.galleryItems = this.getItems();\n\n        // At the moement, Zoom from image doesn't support dynamic options\n        // @todo add zoomFromImage support for dynamic images\n        if (this.s.dynamic) {\n            this.zoomFromImage = false;\n        }\n\n        // s.preload should not be grater than $item.length\n        if (\n            this.s.preload &&\n            this.s.preload > (this.s.dynamicEl || []).length\n        ) {\n            this.s.preload = (this.s.dynamicEl || []).length;\n        }\n\n        this.init();\n\n        return this;\n    }\n\n    init(): void {\n        this.addSlideVideoInfo(this.galleryItems);\n        const fromHash = this.buildFromHash();\n\n        let openGalleryAfter = 0;\n\n        if (!fromHash) {\n            openGalleryAfter = this.buildStructure();\n        }\n\n        if (this.s.keyPress) {\n            this.keyPress();\n        }\n\n        setTimeout(() => {\n            this.enableDrag();\n            this.enableSwipe();\n        }, 50);\n\n        if (this.galleryItems.length > 1) {\n            this.arrow();\n\n            if (this.s.mousewheel) {\n                this.mousewheel();\n            }\n        }\n\n        if (this.s.dynamic) {\n            const index = this.s.index || 0;\n\n            setTimeout(() => {\n                this.openGallery(index);\n            }, openGalleryAfter);\n        } else {\n            // Using for loop instead of using bubbling as the items can be any html element.\n            for (let index = 0; index < this.items.length; index++) {\n                const element = this.items[index];\n\n                // Using different namespace for click because click event should not unbind if selector is same object('this')\n                // @todo manage all event listners - should have namespace that represent element\n                LG(element).on(`click.lgcustom-item-${index}`, (e) => {\n                    e.preventDefault();\n                    const currentItemIndex = this.s.index || index;\n                    let transform;\n                    if (this.zoomFromImage) {\n                        const imageSize = utils.getSize(element);\n                        transform = utils.getTransform(element, imageSize);\n                    }\n                    this.openGallery(currentItemIndex, transform);\n                });\n            }\n        }\n    }\n\n    buildModules(): number {\n        // module constructor\n        // Modules are build incrementally.\n        // Gallery should be opened only once all the modules are initialized.\n        // use moduleBuildTimeout to make sure this\n        let numberOfModules = 0;\n        for (const key in window.lgModules) {\n            numberOfModules++;\n            ((num) => {\n                setTimeout(() => {\n                    this.modules[key] = new window.lgModules[key](this);\n                }, 10 * num);\n            })(numberOfModules);\n        }\n\n        return numberOfModules * 10;\n    }\n\n    getSlideItem(index: number): lgQuery {\n        return LG(this.getSlideItemId(index));\n    }\n    getSlideItemId(index: number): string {\n        return `#lg-item-${this.lgId}-${index}`;\n    }\n    getById(id: string): string {\n        return `${id}-${this.lgId}`;\n    }\n\n    buildStructure(): number {\n        const container = (LG(\n            `#${this.getById('lg-container')}`,\n        ).get() as unknown) as HTMLElement;\n        if (container) {\n            return 0;\n        }\n        let controls = '';\n        let subHtmlCont = '';\n\n        // Create controls\n        if (this.s.controls && this.galleryItems.length > 1) {\n            controls = `<div class=\"lg-actions\">\n                <button type=\"button\" id=\"${this.getById(\n                    'lg-prev',\n                )}\" aria-label=\"Previous slide\" class=\"lg-prev lg-icon\"> ${\n                this.s.prevHtml\n            } </button>\n                <button type=\"button\" id=\"${this.getById(\n                    'lg-next',\n                )}\" aria-label=\"Next slide\" class=\"lg-next lg-icon\"> ${\n                this.s.nextHtml\n            } </button>\n                </div>`;\n        }\n\n        if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n            subHtmlCont =\n                '<div class=\"lg-sub-html\" role=\"status\" aria-live=\"polite\"></div>';\n        }\n\n        let addClasses = '';\n\n        if (this.s.hideSubHtml) {\n            // Do not remove space before last single quote\n            addClasses += 'lg-hide-sub-html ';\n        }\n\n        const ariaLabelledby = this.s.ariaLabelledby\n            ? 'aria-labelledby=\"' + this.s.ariaLabelledby + '\"'\n            : '';\n        const ariaDescribedby = this.s.ariaDescribedby\n            ? 'aria-describedby=\"' + this.s.ariaDescribedby + '\"'\n            : '';\n\n        const containerClassName = `lg-container ${\n            document.body !== this.s.container ? 'lg-inline' : ''\n        }`;\n        const template = `\n        <div class=\"${containerClassName}\" id=\"${this.getById(\n            'lg-container',\n        )}\" tabindex=\"-1\" aria-modal=\"true\" ${ariaLabelledby} ${ariaDescribedby} role=\"dialog\"\n        >\n            <div id=\"${this.getById('lg-backdrop')}\" class=\"lg-backdrop\"></div>\n\n            <div id=\"${this.getById(\n                'lg-outer',\n            )}\" class=\"lg-outer lg-hide-items ${this.s.addClass} ${addClasses}\">\n                    <div class=\"lg\" style=\"width: ${this.s.width}; height:${\n            this.s.height\n        }\">\n                        <div id=\"${this.getById(\n                            'lg-inner',\n                        )}\" class=\"lg-inner\"></div>\n                        <div id=\"${this.getById(\n                            'lg-toolbar',\n                        )}\" class=\"lg-toolbar lg-group\">\n                        <button type=\"button\" aria-label=\"Close gallery\" id=\"${this.getById(\n                            'lg-close',\n                        )}\" class=\"lg-close lg-icon\"></button>\n                    </div>\n                    ${controls}\n                    ${subHtmlCont}\n                </div> \n            </div>\n        </div>\n        `;\n\n        LG(this.s.container).css('position', 'relative').append(template);\n        this.outer = LG(`#${this.getById('lg-outer')}`);\n        this.outer.get().focus();\n\n        if (this.s.useLeft) {\n            this.outer.addClass('lg-use-left');\n\n            // Set mode lg-slide if use left is true;\n            this.s.mode = 'lg-slide';\n        } else {\n            this.outer.addClass('lg-use-css3');\n        }\n\n        // add Class for css support and transition mode\n        if (this.doCss()) {\n            this.outer.addClass('lg-css3');\n        } else {\n            this.outer.addClass('lg-css');\n\n            // Set speed 0 because no animation will happen if browser doesn't support css3\n            this.s.speed = 0;\n        }\n\n        this.outer.addClass(this.s.mode);\n\n        if (this.s.enableDrag && this.galleryItems.length > 1) {\n            this.outer.addClass('lg-grab');\n        }\n\n        if (this.s.showAfterLoad) {\n            this.outer.addClass('lg-show-after-load');\n        }\n\n        if (this.doCss()) {\n            const $inner = LG(`#${this.getById('lg-inner')}`);\n            $inner.css('transition-timing-function', this.s.cssEasing);\n            $inner.css('transition-duration', this.s.speed + 'ms');\n        }\n\n        if (this.s.download) {\n            this.outer\n                .find('.lg-toolbar')\n                .append(\n                    `<a id=\"${this.getById(\n                        'lg-download',\n                    )}\" target=\"_blank\" aria-label=\"Download\" download class=\"lg-download lg-icon\"></a>`,\n                );\n        }\n\n        this.counter();\n\n        LG(window).on(\n            `resize.lg.global${this.lgId} orientationchange.lg.global${this.lgId}`,\n            () => {\n                if (this.zoomFromImage && !this.s.dynamic && this.lgOpened) {\n                    const imgStyle = this.getDummyImgStyles();\n                    this.outer\n                        .find('.lg-current .lg-dummy-img')\n                        .first()\n                        .attr('style', imgStyle);\n                }\n            },\n        );\n\n        this.hideBars();\n\n        this.closeGallery();\n\n        return this.buildModules();\n    }\n\n    // Append new slides dynamically while gallery is open\n    // Items has to in the form of an array of dynamicEl\n    appendSlides(items: DynamicItem): void {\n        this.galleryItems = this.galleryItems.concat(items);\n        LG(`#${this.getById('lg-counter-all')}`).html(\n            this.galleryItems.length + '',\n        );\n        this.LGel.trigger('appendSlides.lg', { items });\n    }\n\n    // Get gallery items based on multiple conditions\n    // @todo - remove this.$items\n    getItems(): DynamicItem[] {\n        // Gallery items\n        this.items = [];\n        if (!this.s.dynamic) {\n            if (this.s.selector === 'this') {\n                this.items.push(this.el);\n            } else if (this.s.selector) {\n                if (this.s.selectWithin) {\n                    const selectWithin = LG(this.s.selectWithin);\n                    this.items = selectWithin.find(this.s.selector).get();\n                } else {\n                    this.items = this.el.querySelectorAll(this.s.selector);\n                }\n            } else {\n                this.items = this.el.children;\n            }\n            return utils.getDynamicOptions(\n                this.items,\n                this.s.extraProps,\n                this.s.getCaptionFromTitleOrAlt,\n            );\n        } else {\n            return this.s.dynamicEl || [];\n        }\n    }\n\n    /**\n     * Build Gallery\n     * @param {Number} index  - index of the slide\n     * @param {String} transform - Css transform value when zoomFromImage is enabled\n     */\n    openGallery(index: number, transform?: string): void {\n        // prevent accidental double execution\n        if (this.lgOpened) return;\n\n        this.lgOpened = true;\n\n        const backdrop = LG(`#${this.getById('lg-backdrop')}`);\n        const container = LG(`#${this.getById('lg-container')}`);\n        this.outer.removeClass('lg-hide-items');\n\n        if (!this.zoomFromImage || !transform) {\n            this.outer.addClass(this.s.startClass);\n        } else if (this.zoomFromImage && transform) {\n            this.outer.addClass('lg-zoom-from-image');\n        }\n\n        backdrop.css('transition-duration', this.s.backdropDuration + 'ms');\n\n        const itemsToBeInsertedToDom = this.getItemsToBeInsertedToDom(\n            index,\n            index,\n        );\n        this.currentItemsInDom = itemsToBeInsertedToDom;\n\n        let items = '';\n        itemsToBeInsertedToDom.forEach((item) => {\n            items = items + `<div id=\"${item}\" class=\"lg-item\"></div>`;\n        });\n\n        LG(`#${this.getById('lg-inner')}`).append(items);\n        if (!this.zoomFromImage || !transform) {\n            this.getSlideItem(index).removeClass('lg-complete');\n        }\n        this.LGel.trigger('onBeforeOpen.lg');\n\n        // add class lg-current to remove initial transition\n        this.getSlideItem(index).addClass('lg-current');\n\n        this.lGalleryOn = false;\n        setTimeout(() => {\n            // Store the current scroll top value to scroll back after closing the gallery..\n            this.prevScrollTop = LG(window).scrollTop();\n\n            this.index = index;\n\n            // Need to check both zoomFromImage and transform values as we need to set set the\n            // default opening animation if user missed to add the lg-size attribute\n            if (this.zoomFromImage && transform) {\n                this.getSlideItem(index)\n                    .addClass('start-end-progress')\n                    .css('transform', transform)\n                    .css(\n                        'transition-duration',\n                        this.s.startAnimationDuration + 'ms',\n                    );\n                setTimeout(() => {\n                    this.getSlideItem(index).css(\n                        'transform',\n                        'translate3d(0, 0, 0) translate3d(0, 0, 0)',\n                    );\n                }, 100);\n            }\n\n            container.addClass('lg-show');\n            setTimeout(function () {\n                backdrop.addClass('in');\n                container.addClass('lg-show-in');\n            }, 10);\n\n            // lg-visible class resets gallery opacity to 1\n            if (!this.zoomFromImage || !transform) {\n                setTimeout(() => {\n                    this.outer.addClass('lg-visible');\n                }, this.s.backdropDuration);\n            }\n\n            // initiate slide function\n            this.slide(index, false, false, false);\n\n            this.LGel.trigger('onAfterOpen.lg');\n        });\n\n        LG(document.body).addClass('lg-on');\n    }\n\n    // Build Gallery if gallery id exist in the URL\n    buildFromHash(): boolean | undefined {\n        // if dynamic option is enabled execute immediately\n        const _hash = window.location.hash;\n        if (_hash.indexOf('lg=' + this.s.galleryId) > 0) {\n            // This class is used to remove the initial animation if galleryId present in the URL\n            LG(document.body).addClass('lg-from-hash');\n            this.zoomFromImage = false;\n\n            const index = this.getIndexFromUrl(_hash);\n\n            const openGalleryAfter = this.buildStructure();\n\n            setTimeout(() => {\n                this.openGallery(index);\n            }, openGalleryAfter);\n            return true;\n        }\n    }\n\n    hideBars(): void {\n        // Hide controllers if mouse doesn't move for some period\n        setTimeout(() => {\n            this.outer.removeClass('lg-hide-items');\n            if (this.s.hideBarsDelay > 0) {\n                this.outer.on('mousemove.lg click.lg touchstart.lg', () => {\n                    this.outer.removeClass('lg-hide-items');\n\n                    clearTimeout(this.hideBarTimeout);\n\n                    // Timeout will be cleared on each slide movement also\n                    this.hideBarTimeout = setTimeout(() => {\n                        this.outer.addClass('lg-hide-items');\n                    }, this.s.hideBarsDelay);\n                });\n                this.outer.trigger('mousemove.lg');\n            }\n        }, this.s.showBarsAfter);\n    }\n\n    // Find css3 support\n    doCss(): boolean {\n        let supported = false;\n        const transition = [\n            'transition',\n            'MozTransition',\n            'WebkitTransition',\n            'OTransition',\n            'msTransition',\n            'KhtmlTransition',\n        ];\n        const root = document.documentElement;\n        for (let i = 0; i < transition.length; i++) {\n            if (transition[i] in root.style) {\n                supported = true;\n                break;\n            }\n        }\n        return supported;\n    }\n\n    /**\n     *  @desc Create image counter\n     *  Ex: 1/10\n     */\n    counter(): void {\n        if (this.s.counter) {\n            const counterHtml = `<div class=\"lg-counter\" role=\"status\" aria-live=\"polite\">\n                <span id=\"${this.getById(\n                    'lg-counter-current',\n                )}\" class=\"lg-counter-current\">${this.index + 1} </span> / \n                <span id=\"${this.getById(\n                    'lg-counter-all',\n                )}\" class=\"lg-counter-all\">${\n                this.galleryItems.length\n            } </span></div>`;\n            this.outer.find(this.s.appendCounterTo).append(counterHtml);\n        }\n    }\n\n    /**\n     *  @desc add sub-html into the slide\n     *  @param {Number} index - index of the slide\n     */\n    addHtml(index: number): void {\n        let subHtml;\n        let subHtmlUrl;\n        if (this.galleryItems[index].subHtmlUrl) {\n            subHtmlUrl = this.galleryItems[index].subHtmlUrl;\n        } else {\n            subHtml = this.galleryItems[index].subHtml;\n        }\n\n        if (!subHtmlUrl) {\n            if (subHtml) {\n                // get first letter of subhtml\n                // if first letter starts with . or # get the html form the jQuery object\n                const fL = subHtml.substring(0, 1);\n                if (fL === '.' || fL === '#') {\n                    if (this.s.subHtmlSelectorRelative && !this.s.dynamic) {\n                        subHtml = LG(this.items)\n                            .eq(index)\n                            .find(subHtml)\n                            .first()\n                            .html();\n                    } else {\n                        subHtml = LG(subHtml).first().html();\n                    }\n                }\n            } else {\n                subHtml = '';\n            }\n        }\n\n        if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n            if (subHtmlUrl) {\n                this.outer.find('.lg-sub-html').load(subHtmlUrl);\n            } else {\n                this.outer.find('.lg-sub-html').html(subHtml as string);\n            }\n        } else {\n            const currentSlide = LG(this.getSlideItemId(index));\n            if (subHtmlUrl) {\n                currentSlide.load(subHtmlUrl);\n            } else {\n                currentSlide.append(\n                    `<div class=\"lg-sub-html\">${subHtml}</div>`,\n                );\n            }\n        }\n\n        // Add lg-empty-html class if title doesn't exist\n        if (typeof subHtml !== 'undefined' && subHtml !== null) {\n            if (subHtml === '') {\n                this.outer\n                    .find(this.s.appendSubHtmlTo)\n                    .addClass('lg-empty-html');\n            } else {\n                this.outer\n                    .find(this.s.appendSubHtmlTo)\n                    .removeClass('lg-empty-html');\n            }\n        }\n\n        this.LGel.trigger('onAfterAppendSubHtml.lg', { index });\n    }\n\n    /**\n     *  @desc Preload slides\n     *  @param {Number} index - index of the slide\n     * @todo preload not working for the first slide, Also, should work for the first and last slide as well\n     */\n    preload(index: number): void {\n        for (let i = 1; i <= this.s.preload; i++) {\n            if (i >= this.galleryItems.length - index) {\n                break;\n            }\n\n            this.loadContent(index + i, false, false);\n        }\n\n        for (let j = 1; j <= this.s.preload; j++) {\n            if (index - j < 0) {\n                break;\n            }\n\n            this.loadContent(index - j, false, false);\n        }\n    }\n\n    getDummyImgStyles(imageSize?: ImageSize): string {\n        imageSize =\n            imageSize || utils.getSize(LG(this.items).eq(this.index).get());\n        if (!imageSize) return '';\n        return `width:${imageSize.width}px; \n                margin-left: -${imageSize.width / 2}px;\n                margin-top: -${imageSize.height / 2}px; \n                height:${imageSize.height}px`;\n    }\n\n    setImgMarkup(src: string, $currentSlide: lgQuery, index: number): void {\n        // Use the thumbnail as dummy image which will be resized to actual image size and\n        // displayed on top of actual image\n        let _dummyImgSrc;\n        let imgContnet = '';\n        let imageSize;\n        let $currentItem;\n        if (!this.s.dynamic) {\n            $currentItem = LG(this.items).eq(index);\n            imageSize = utils.getSize($currentItem.get());\n        }\n        const currentDynamicItem = this.galleryItems[index];\n        const alt = currentDynamicItem.alt\n            ? 'alt=\"' + currentDynamicItem.alt + '\"'\n            : '';\n\n        if (!this.lGalleryOn && this.zoomFromImage && imageSize) {\n            if (imageSize && $currentItem) {\n                if (!this.s.exThumbImage) {\n                    _dummyImgSrc = $currentItem.find('img').first().attr('src');\n                } else {\n                    _dummyImgSrc = $currentItem.attr(this.s.exThumbImage);\n                }\n                const imgStyle = this.getDummyImgStyles(imageSize);\n                const dummyImgContent = `<img ${alt} style=\"${imgStyle}\" class=\"lg-dummy-img\" src=\"${_dummyImgSrc}\" />`;\n\n                $currentSlide.addClass('lg-first-slide');\n\n                imgContnet = dummyImgContent;\n            }\n        } else {\n            imgContnet = ` <img ${alt} class=\"lg-object lg-image\" data-index=\"${index}\" src=\"${src}\" /> `;\n        }\n        const imgMarkup = `<div class=\"lg-img-wrap\"> ${imgContnet}</div>`;\n        $currentSlide.prepend(imgMarkup);\n    }\n\n    onLgObjectLoad(\n        $el: lgQuery,\n        index: number,\n        delay: number,\n        speed: number,\n        dummyImageLoaded: boolean,\n    ): void {\n        if (dummyImageLoaded) {\n            this.LGel.trigger('onSlideItemLoad.lg', {\n                index,\n                delay: delay || 0,\n            });\n        }\n        $el.find('.lg-object')\n            .first()\n            .on('load.lg error.lg', () => {\n                this.handleLgObjectLoad(\n                    $el,\n                    index,\n                    delay,\n                    speed,\n                    dummyImageLoaded,\n                );\n            });\n    }\n    handleLgObjectLoad(\n        $el: lgQuery,\n        index: number,\n        delay: number,\n        speed: number,\n        dummyImageLoaded: boolean,\n    ): void {\n        setTimeout(() => {\n            $el.addClass('lg-complete lg-complete_');\n            if (!dummyImageLoaded) {\n                this.LGel.trigger('onSlideItemLoad.lg', {\n                    index,\n                    delay: delay || 0,\n                });\n            }\n        }, speed);\n    }\n\n    /**\n     * @desc Check the given src is video\n     * @param {String} src\n     * @return {Object} video type\n     * Ex:{ youtube  :  [\"//www.youtube.com/watch?v=c0asJgSyxcY\", \"c0asJgSyxcY\"] }\n     *\n     * @todo - this information can be moved to dynamicEl to avoid frequent calls\n     */\n    isVideo(src: string, index: number): VideoInfo | undefined {\n        if (!src) {\n            if (this.galleryItems[index].video) {\n                return {\n                    html5: true,\n                };\n            } else {\n                console.error(\n                    'lightGallery :- data-src is not provided on slide item ' +\n                        (index + 1) +\n                        '. Please make sure the selector property is properly configured. More info - http://sachinchoolur.github.io/lightGallery/demos/html-markup.html',\n                );\n                return;\n            }\n        }\n\n        const youtube = src.match(\n            /\\/\\/(?:www\\.)?youtu(?:\\.be|be\\.com|be-nocookie\\.com)\\/(?:watch\\?v=|embed\\/)?([a-z0-9\\-\\_\\%]+)/i,\n        );\n        const vimeo = src.match(\n            /\\/\\/(?:www\\.)?(?:player\\.)?vimeo.com\\/(?:video\\/)?([0-9a-z\\-_]+)/i,\n        );\n        const wistia = src.match(\n            /https?:\\/\\/(.+)?(wistia\\.com|wi\\.st)\\/(medias|embed)\\/([0-9a-z\\-_]+)(.*)/,\n        );\n\n        if (youtube) {\n            return {\n                youtube,\n            };\n        } else if (vimeo) {\n            return {\n                vimeo,\n            };\n        } else if (wistia) {\n            return {\n                wistia,\n            };\n        }\n    }\n\n    // Add video slideInfo\n    addSlideVideoInfo(items: DynamicItem[]): void {\n        items.forEach((element, index) => {\n            element.__slideVideoInfo = this.isVideo(element.src, index);\n        });\n    }\n\n    /**\n     *  @desc Load slide content into slide.\n     *  @param {Number} index - index of the slide.\n     *  @param {Boolean} rec - if true call loadcontent() function again.\n     *  @param {Boolean} firstSlide - For setting the delay.\n     */\n    loadContent(index: number, rec: boolean, firstSlide: boolean): void {\n        let _$img;\n        let _src: string;\n        let _poster;\n        const currentDynamicItem = this.galleryItems[index];\n        const $currentSlide = LG(this.getSlideItemId(index));\n\n        if (currentDynamicItem.poster) {\n            _poster = currentDynamicItem.poster;\n        }\n\n        const _html5Video =\n            currentDynamicItem.video && JSON.parse(currentDynamicItem.video);\n        _src = currentDynamicItem.src;\n\n        if (currentDynamicItem.responsive) {\n            const srcDyItms = currentDynamicItem.responsive.split(',');\n            _src = utils.getResponsiveSrc(srcDyItms) || _src;\n        }\n\n        const _srcset = currentDynamicItem.srcset;\n        const _sizes = currentDynamicItem.sizes;\n\n        let iframe = false;\n        if (this.galleryItems[index].iframe) {\n            iframe = true;\n        }\n\n        let imageSize;\n        if (!this.s.dynamic) {\n            const $currentItem = this.items[index];\n            imageSize = utils.getSize($currentItem);\n        }\n\n        // delay for adding complete class. it is 0 except first time.\n        let delay = 0;\n        if (firstSlide) {\n            if (this.zoomFromImage && imageSize) {\n                delay = this.s.startAnimationDuration + 10;\n            } else {\n                delay = this.s.backdropDuration + 10;\n            }\n        }\n\n        const videoInfo = currentDynamicItem.__slideVideoInfo;\n        if (!$currentSlide.hasClass('lg-loaded')) {\n            if (iframe) {\n                const markup = utils.getIframeMarkup(\n                    _src,\n                    this.s.iframeMaxWidth,\n                );\n                $currentSlide.prepend(markup);\n            } else if (_poster) {\n                const markup = utils.getVideoPosterMarkup(_poster, videoInfo);\n                $currentSlide.prepend(markup);\n                this.LGel.trigger('hasVideo.lg', {\n                    index,\n                    src: _src,\n                    html5Video: _html5Video,\n                    hasPoster: true,\n                });\n            } else if (videoInfo) {\n                const markup =\n                    '<div class=\"lg-video-cont \"><div class=\"lg-video\"></div></div>';\n                $currentSlide.prepend(markup);\n                this.LGel.trigger('hasVideo.lg', {\n                    index,\n                    src: _src,\n                    html5Video: _html5Video,\n                    hasPoster: false,\n                });\n            } else {\n                this.setImgMarkup(_src, $currentSlide, index);\n            }\n\n            this.LGel.trigger('onAferAppendSlide.lg', { index });\n\n            _$img = $currentSlide.find('.lg-object');\n            if (_sizes) {\n                _$img.attr('sizes', _sizes);\n            }\n\n            if (_srcset) {\n                _$img.attr('srcset', _srcset);\n                if (this.s.supportLegacyBrowser) {\n                    try {\n                        picturefill({\n                            elements: [_$img.get()],\n                        });\n                    } catch (e) {\n                        console.warn(\n                            'lightGallery :- If you want srcset to be supported for older browser please include picturefil javascript library in your document.',\n                        );\n                    }\n                }\n            }\n\n            if (this.s.appendSubHtmlTo !== '.lg-sub-html') {\n                this.addHtml(index);\n            }\n        }\n\n        // For first time add some delay for displaying the start animation.\n        let _speed = 0;\n\n        // Do not change the delay value because it is required for zoom plugin.\n        // If gallery opened from direct url (hash) speed value should be 0\n        if (delay && !LG(document.body).hasClass('lg-from-hash')) {\n            _speed = delay;\n        }\n\n        // Only for first slide\n        if (!this.lGalleryOn && this.zoomFromImage && imageSize) {\n            setTimeout(() => {\n                $currentSlide\n                    .removeClass('start-end-progress')\n                    .removeAttr('style');\n            }, this.s.startAnimationDuration + 100);\n            if (!$currentSlide.hasClass('lg-loaded')) {\n                setTimeout(() => {\n                    $currentSlide\n                        .find('.lg-img-wrap')\n                        .append(\n                            `<img class=\"lg-object lg-image\" data-index=\"${index}\" src=\"${_src}\" />`,\n                        );\n                    this.onLgObjectLoad(\n                        $currentSlide,\n                        index,\n                        delay,\n                        _speed,\n                        true,\n                    );\n                    $currentSlide\n                        .find('.lg-object')\n                        .first()\n                        .on('load.lg error.lg', () => {\n                            this.loadContentOnLoad(\n                                index,\n                                $currentSlide,\n                                _speed,\n                            );\n                        });\n                }, this.s.startAnimationDuration + 100);\n            }\n        }\n\n        $currentSlide.addClass('lg-loaded');\n\n        this.onLgObjectLoad($currentSlide, index, delay, _speed, false);\n\n        // @todo check load state for html5 videos\n        if (videoInfo && videoInfo.html5 && !_poster) {\n            $currentSlide.addClass('lg-complete lg-complete_');\n        }\n\n        // When gallery is opened once content is loaded (second time) need to add lg-complete class for css styling\n        if (\n            (!this.zoomFromImage || !imageSize) &&\n            $currentSlide.hasClass('lg-complete_') &&\n            firstSlide\n        ) {\n            setTimeout(() => {\n                $currentSlide.addClass('lg-complete');\n            }, this.s.backdropDuration);\n        }\n\n        // Content loaded\n        // Need to set lGalleryOn before calling preload function\n        this.lGalleryOn = true;\n\n        if (rec === true) {\n            if (!$currentSlide.hasClass('lg-complete_')) {\n                $currentSlide\n                    .find('.lg-object')\n                    .first()\n                    .on('load.lg error.lg', () => {\n                        this.preload(index);\n                    });\n            } else {\n                this.preload(index);\n            }\n        }\n    }\n\n    loadContentOnLoad(\n        index: number,\n        $currentSlide: lgQuery,\n        speed: number,\n    ): void {\n        setTimeout(() => {\n            $currentSlide.find('.lg-dummy-img').remove();\n            $currentSlide.removeClass('lg-first-slide');\n            this.preload(index);\n        }, speed + 300);\n    }\n\n    getItemsToBeInsertedToDom(\n        index: number,\n        prevIndex: number,\n        numberOfItems = 0,\n    ): string[] {\n        const itemsToBeInsertedToDom: string[] = [];\n        // Minimum 2 items should be there\n        let possibleNumberOfItems = Math.max(numberOfItems, 3);\n        possibleNumberOfItems = Math.min(\n            possibleNumberOfItems,\n            this.galleryItems.length,\n        );\n        const prevIndexItem = `lg-item-${this.lgId}-${prevIndex}`;\n        if (this.galleryItems.length <= 3) {\n            this.galleryItems.forEach((element, index) => {\n                itemsToBeInsertedToDom.push(`lg-item-${this.lgId}-${index}`);\n            });\n            return itemsToBeInsertedToDom;\n        }\n\n        if (index < (this.galleryItems.length - 1) / 2) {\n            for (\n                let idx = index;\n                idx > index - possibleNumberOfItems / 2 && idx >= 0;\n                idx--\n            ) {\n                itemsToBeInsertedToDom.push(`lg-item-${this.lgId}-${idx}`);\n            }\n            const numberOfExistingItems = itemsToBeInsertedToDom.length;\n            for (\n                let idx = 0;\n                idx < possibleNumberOfItems - numberOfExistingItems;\n                idx++\n            ) {\n                itemsToBeInsertedToDom.push(\n                    `lg-item-${this.lgId}-${index + idx + 1}`,\n                );\n            }\n        } else {\n            for (\n                let idx = index;\n                idx <= this.galleryItems.length - 1 &&\n                idx < index + possibleNumberOfItems / 2;\n                idx++\n            ) {\n                itemsToBeInsertedToDom.push(`lg-item-${this.lgId}-${idx}`);\n            }\n            const numberOfExistingItems = itemsToBeInsertedToDom.length;\n            for (\n                let idx = 0;\n                idx < possibleNumberOfItems - numberOfExistingItems;\n                idx++\n            ) {\n                itemsToBeInsertedToDom.push(\n                    `lg-item-${this.lgId}-${index - idx - 1}`,\n                );\n            }\n        }\n        if (this.s.loop) {\n            if (index === this.galleryItems.length - 1) {\n                itemsToBeInsertedToDom.push(`lg-item-${this.lgId}-${0}`);\n            } else if (index === 0) {\n                itemsToBeInsertedToDom.push(\n                    `lg-item-${this.lgId}-${this.galleryItems.length - 1}`,\n                );\n            }\n        }\n        if (itemsToBeInsertedToDom.indexOf(prevIndexItem) === -1) {\n            itemsToBeInsertedToDom.push(`lg-item-${this.lgId}-${prevIndex}`);\n        }\n\n        return itemsToBeInsertedToDom;\n    }\n\n    /**\n    *   @desc slide function for lightgallery\n        ** Slide() gets call on start\n        ** ** Set lg.on true once slide() function gets called.\n        ** Call loadContent() on slide() function inside setTimeout\n        ** ** On first slide we do not want any animation like slide of fade\n        ** ** So on first slide( if lg.on if false that is first slide) loadContent() should start loading immediately\n        ** ** Else loadContent() should wait for the transition to complete.\n        ** ** So set timeout s.speed + 50\n    <=> ** loadContent() will load slide content in to the particular slide\n        ** ** It has recursion (rec) parameter. if rec === true loadContent() will call preload() function.\n        ** ** preload will execute only when the previous slide is fully loaded (images iframe)\n        ** ** avoid simultaneous image load\n    <=> ** Preload() will check for s.preload value and call loadContent() again accoring to preload value\n        ** loadContent()  <====> Preload();\n    \n    *   @param {Number} index - index of the slide\n    *   @param {Boolean} fromTouch - true if slide function called via touch event or mouse drag\n    *   @param {Boolean} fromThumb - true if slide function called via thumbnail click\n    *   @param {String} direction - Direction of the slide(next/prev)\n    */\n    slide(\n        index: number,\n        fromTouch: boolean,\n        fromThumb: boolean,\n        direction?: SlideDirection | false,\n    ): void {\n        let _prevIndex = 0;\n        try {\n            const currentItemId = this.outer\n                .find('.lg-current')\n                .first()\n                .attr('id');\n            _prevIndex = parseInt(currentItemId.split('-')[3]) || 0;\n        } catch (error) {\n            _prevIndex = 0;\n        }\n\n        const itemsToBeInsertedToDom = this.getItemsToBeInsertedToDom(\n            index,\n            _prevIndex,\n            this.s.numberOfSlideItemsInDom,\n        );\n\n        itemsToBeInsertedToDom.forEach((item) => {\n            if (this.currentItemsInDom.indexOf(item) === -1) {\n                LG(`#${this.getById('lg-inner')}`).append(\n                    `<div id=\"${item}\" class=\"lg-item\"></div>`,\n                );\n            }\n        });\n\n        this.currentItemsInDom.forEach((item) => {\n            if (itemsToBeInsertedToDom.indexOf(item) === -1) {\n                LG(`#${item}`).remove();\n            }\n        });\n        this.currentItemsInDom = itemsToBeInsertedToDom;\n\n        // Prevent if multiple call\n        // Required for hsh plugin\n        if (this.lGalleryOn && _prevIndex === index) {\n            return;\n        }\n\n        const _length = this.galleryItems.length;\n        const _time = this.lGalleryOn ? this.s.speed : 0;\n\n        if (!this.lgBusy) {\n            if (this.s.download) {\n                const _src =\n                    this.galleryItems[index].downloadUrl !== false &&\n                    (this.galleryItems[index].downloadUrl ||\n                        this.galleryItems[index].src);\n\n                if (_src) {\n                    LG(`#${this.getById('lg-download')}`).attr(\n                        'href',\n                        _src as string,\n                    );\n                    this.outer.removeClass('lg-hide-download');\n                } else {\n                    this.outer.addClass('lg-hide-download');\n                }\n            }\n\n            LG(this.el).trigger('onBeforeSlide.lg', {\n                prevIndex: _prevIndex,\n                index,\n                fromTouch,\n                fromThumb,\n            });\n\n            this.lgBusy = true;\n\n            clearTimeout(this.hideBarTimeout);\n\n            // Add title if this.s.appendSubHtmlTo === lg-sub-html\n            if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n                // wait for slide animation to complete\n                setTimeout(() => {\n                    this.addHtml(index);\n                }, _time);\n            }\n\n            this.arrowDisable(index);\n\n            if (!direction) {\n                if (index < _prevIndex) {\n                    direction = 'prev';\n                } else if (index > _prevIndex) {\n                    direction = 'next';\n                }\n            }\n\n            if (!fromTouch) {\n                // remove all transitions\n                this.outer.addClass('lg-no-trans');\n\n                this.outer\n                    .find('.lg-item')\n                    .removeClass('lg-prev-slide lg-next-slide');\n\n                if (direction === 'prev') {\n                    //prevslide\n                    this.getSlideItem(index).addClass('lg-prev-slide');\n                    this.getSlideItem(_prevIndex).addClass('lg-next-slide');\n                } else {\n                    // next slide\n                    this.getSlideItem(index).addClass('lg-next-slide');\n                    this.getSlideItem(_prevIndex).addClass('lg-prev-slide');\n                }\n\n                // give 50 ms for browser to add/remove class\n                setTimeout(() => {\n                    this.outer.find('.lg-item').removeClass('lg-current');\n\n                    //this.getSlideItem(_prevIndex).removeClass('lg-current');\n                    this.getSlideItem(index).addClass('lg-current');\n\n                    // reset all transitions\n                    this.outer.removeClass('lg-no-trans');\n                }, 50);\n            } else {\n                this.outer\n                    .find('.lg-item')\n                    .removeClass('lg-prev-slide lg-current lg-next-slide');\n                let touchPrev;\n                let touchNext;\n                if (_length > 2) {\n                    touchPrev = index - 1;\n                    touchNext = index + 1;\n\n                    if (index === 0 && _prevIndex === _length - 1) {\n                        // next slide\n                        touchNext = 0;\n                        touchPrev = _length - 1;\n                    } else if (index === _length - 1 && _prevIndex === 0) {\n                        // prev slide\n                        touchNext = 0;\n                        touchPrev = _length - 1;\n                    }\n                } else {\n                    touchPrev = 0;\n                    touchNext = 1;\n                }\n\n                if (direction === 'prev') {\n                    this.getSlideItem(touchNext).addClass('lg-next-slide');\n                } else {\n                    this.getSlideItem(touchPrev).addClass('lg-prev-slide');\n                }\n\n                this.getSlideItem(index).addClass('lg-current');\n            }\n            if (this.lGalleryOn) {\n                setTimeout(() => {\n                    this.loadContent(index, true, false);\n                }, this.s.speed + 50);\n\n                setTimeout(() => {\n                    this.lgBusy = false;\n                    this.LGel.trigger('onAfterSlide.lg', {\n                        prevIndex: _prevIndex,\n                        index,\n                        fromTouch,\n                        fromThumb,\n                    });\n                }, this.s.speed);\n            } else {\n                this.loadContent(index, true, true);\n\n                this.lgBusy = false;\n                this.LGel.trigger('onAfterSlide.lg', {\n                    prevIndex: _prevIndex,\n                    index,\n                    fromTouch,\n                    fromThumb,\n                });\n            }\n\n            if (this.s.counter) {\n                LG(`#${this.getById('lg-counter-current')}`).html(\n                    index + 1 + '',\n                );\n            }\n        }\n\n        this.index = index;\n    }\n\n    touchMove(startCoords: Coords, endCoords: Coords): void {\n        const distanceX = endCoords.pageX - startCoords.pageX;\n        const distanceY = endCoords.pageY - startCoords.pageY;\n        let allowSwipe = false;\n\n        if (this.swipeDirection) {\n            allowSwipe = true;\n        } else {\n            if (Math.abs(distanceX) > 15) {\n                this.swipeDirection = 'horizontal';\n                allowSwipe = true;\n            } else if (Math.abs(distanceY) > 15) {\n                this.swipeDirection = 'vertical';\n                allowSwipe = true;\n            }\n        }\n\n        if (!allowSwipe) {\n            return;\n        }\n\n        const $currentSlide = this.getSlideItem(this.index);\n\n        if (this.swipeDirection === 'horizontal') {\n            // reset opacity and transition duration\n            this.outer.addClass('lg-dragging');\n\n            // move current slide\n            this.setTranslate($currentSlide, distanceX, 0);\n\n            // move next and prev slide with current slide\n            const width = $currentSlide.get().offsetWidth;\n            this.setTranslate(\n                this.outer.find('.lg-prev-slide').first(),\n                -width + distanceX,\n                0,\n            );\n            this.setTranslate(\n                this.outer.find('.lg-next-slide').first(),\n                width + distanceX,\n                0,\n            );\n        } else if (this.swipeDirection === 'vertical') {\n            const container = LG(`#${this.getById('lg-container')}`);\n            container.addClass('lg-dragging-vertical');\n\n            const opacity = 1 - Math.abs(distanceY) / window.innerHeight;\n            const backdrop = LG(`#${this.getById('lg-backdrop')}`);\n            backdrop.css('opacity', opacity);\n\n            const scale = 1 - Math.abs(distanceY) / (window.innerWidth * 2);\n            this.setTranslate($currentSlide, 0, distanceY, scale, scale);\n        }\n    }\n\n    touchEnd(endCoords: Coords, startCoords: Coords): void {\n        let distance;\n\n        // keep slide animation for any mode while dragg/swipe\n        if (this.s.mode !== 'lg-slide') {\n            this.outer.addClass('lg-slide');\n        }\n\n        // set transition duration\n        setTimeout(() => {\n            const container = LG(`#${this.getById('lg-container')}`);\n            const backdrop = LG(`#${this.getById('lg-backdrop')}`);\n\n            container.removeClass('lg-dragging-vertical');\n            this.outer.removeClass('lg-dragging');\n\n            let triggerClick = true;\n\n            if (this.swipeDirection === 'horizontal') {\n                distance = endCoords.pageX - startCoords.pageX;\n                const distanceAbs = Math.abs(\n                    endCoords.pageX - startCoords.pageX,\n                );\n                if (distance < 0 && distanceAbs > this.s.swipeThreshold) {\n                    this.goToNextSlide(true);\n                    triggerClick = false;\n                } else if (\n                    distance > 0 &&\n                    distanceAbs > this.s.swipeThreshold\n                ) {\n                    this.goToPrevSlide(true);\n                    triggerClick = false;\n                }\n            } else if (this.swipeDirection === 'vertical') {\n                distance = Math.abs(endCoords.pageY - startCoords.pageY);\n                if (this.s.closable && distance > 100) {\n                    this.destroy();\n                    return;\n                } else {\n                    backdrop.css('opacity', 1);\n                }\n            }\n            this.outer.find('.lg-item').removeAttr('style');\n\n            if (\n                triggerClick &&\n                Math.abs(endCoords.pageX - startCoords.pageX) < 5\n            ) {\n                // Trigger click if distance is less than 5 pix\n                this.LGel.trigger('onSlideClick.lg');\n            }\n\n            this.swipeDirection = undefined;\n        });\n\n        // remove slide class once drag/swipe is completed if mode is not slide\n        setTimeout(() => {\n            if (\n                !this.outer.hasClass('lg-dragging') &&\n                this.s.mode !== 'lg-slide'\n            ) {\n                this.outer.removeClass('lg-slide');\n            }\n        }, this.s.speed + 100);\n    }\n\n    enableSwipe(): void {\n        let startCoords: Coords = {} as Coords;\n        let endCoords: Coords = {} as Coords;\n        let isMoved = false;\n        let isSwiping = false;\n        const inner = LG(`#${this.getById('lg-inner')}`);\n\n        if (this.s.enableSwipe && this.doCss()) {\n            inner.on('touchstart.lg', (e) => {\n                const $item = this.getSlideItem(this.index);\n                if (\n                    (LG(e.target).hasClass('lg-item') ||\n                        $item.get().contains(e.target)) &&\n                    !this.outer.hasClass('lg-zoomed') &&\n                    !this.lgBusy &&\n                    e.targetTouches.length === 1\n                ) {\n                    isSwiping = true;\n                    this.touchAction = 'swipe';\n                    e.preventDefault();\n                    this.manageSwipeClass();\n                    startCoords = {\n                        pageX: e.targetTouches[0].pageX,\n                        pageY: e.targetTouches[0].pageY,\n                    };\n                }\n            });\n\n            inner.on('touchmove.lg', (e) => {\n                if (\n                    isSwiping &&\n                    this.touchAction === 'swipe' &&\n                    e.targetTouches.length === 1\n                ) {\n                    e.preventDefault();\n                    endCoords = {\n                        pageX: e.targetTouches[0].pageX,\n                        pageY: e.targetTouches[0].pageY,\n                    };\n                    this.touchMove(startCoords, endCoords);\n                    isMoved = true;\n                }\n            });\n\n            inner.on('touchend.lg', () => {\n                if (this.touchAction === 'swipe') {\n                    if (isMoved) {\n                        isMoved = false;\n                        this.touchEnd(endCoords, startCoords);\n                    } else if (isSwiping) {\n                        this.LGel.trigger('onSlideClick.lg');\n                    }\n                    this.touchAction = undefined;\n                    isSwiping = false;\n                }\n            });\n        }\n    }\n\n    enableDrag(): void {\n        let startCoords: Coords = {} as Coords;\n        let endCoords: Coords = {} as Coords;\n        let isDraging = false;\n        let isMoved = false;\n        if (this.s.enableDrag && this.doCss()) {\n            this.outer.on('mousedown.lg', (e) => {\n                const $item = this.getSlideItem(this.index);\n                if (\n                    LG(e.target).hasClass('lg-item') ||\n                    $item.get().contains(e.target)\n                ) {\n                    if (!this.outer.hasClass('lg-zoomed') && !this.lgBusy) {\n                        e.preventDefault();\n                        if (!this.lgBusy) {\n                            this.manageSwipeClass();\n                            startCoords = {\n                                pageX: e.pageX,\n                                pageY: e.pageY,\n                            };\n                            isDraging = true;\n\n                            // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n                            this.outer.get().scrollLeft += 1;\n                            this.outer.get().scrollLeft -= 1;\n\n                            // *\n\n                            this.outer\n                                .removeClass('lg-grab')\n                                .addClass('lg-grabbing');\n\n                            this.LGel.trigger('onDragstart.lg');\n                        }\n                    }\n                }\n            });\n\n            LG(window).on(`mousemove.lg.global${this.lgId}`, (e) => {\n                if (isDraging && this.lgOpened) {\n                    isMoved = true;\n                    endCoords = {\n                        pageX: e.pageX,\n                        pageY: e.pageY,\n                    };\n                    this.touchMove(startCoords, endCoords);\n                    this.LGel.trigger('onDragmove.lg');\n                }\n            });\n\n            LG(window).on(`mouseup.lg.global${this.lgId}`, (e) => {\n                if (!this.lgOpened) {\n                    return;\n                }\n                const target = LG(e.target);\n                if (isMoved) {\n                    isMoved = false;\n                    this.touchEnd(endCoords, startCoords);\n                    this.LGel.trigger('onDragend.lg');\n                } else if (\n                    target.hasClass('lg-object') ||\n                    target.hasClass('lg-video-play')\n                ) {\n                    this.LGel.trigger('onSlideClick.lg');\n                }\n\n                // Prevent execution on click\n                if (isDraging) {\n                    isDraging = false;\n                    this.outer.removeClass('lg-grabbing').addClass('lg-grab');\n                }\n            });\n        }\n    }\n\n    manageSwipeClass(): void {\n        let _touchNext = this.index + 1;\n        let _touchPrev = this.index - 1;\n        if (this.s.loop && this.galleryItems.length > 2) {\n            if (this.index === 0) {\n                _touchPrev = this.galleryItems.length - 1;\n            } else if (this.index === this.galleryItems.length - 1) {\n                _touchNext = 0;\n            }\n        }\n\n        this.outer.find('.lg-item').removeClass('lg-next-slide lg-prev-slide');\n        if (_touchPrev > -1) {\n            this.getSlideItem(_touchPrev).addClass('lg-prev-slide');\n        }\n\n        this.getSlideItem(_touchNext).addClass('lg-next-slide');\n    }\n\n    /**\n     *  @desc Go to next slide\n     *  @param {Boolean} fromTouch - true if slide function called via touch event\n     */\n    goToNextSlide(fromTouch?: boolean): void {\n        let _loop = this.s.loop;\n        if (fromTouch && this.galleryItems.length < 3) {\n            _loop = false;\n        }\n\n        if (!this.lgBusy) {\n            if (this.index + 1 < this.galleryItems.length) {\n                this.index++;\n                this.LGel.trigger('onBeforeNextSlide.lg', {\n                    index: this.index,\n                });\n                this.slide(this.index, !!fromTouch, false, 'next');\n            } else {\n                if (_loop) {\n                    this.index = 0;\n                    this.LGel.trigger('onBeforeNextSlide.lg', {\n                        index: this.index,\n                    });\n                    this.slide(this.index, !!fromTouch, false, 'next');\n                } else if (this.s.slideEndAnimatoin && !fromTouch) {\n                    this.outer.addClass('lg-right-end');\n                    setTimeout(() => {\n                        this.outer.removeClass('lg-right-end');\n                    }, 400);\n                }\n            }\n        }\n    }\n\n    /**\n     *  @desc Go to previous slide\n     *  @param {Boolean} fromTouch - true if slide function called via touch event\n     */\n    goToPrevSlide(fromTouch?: boolean): void {\n        let _loop = this.s.loop;\n        if (fromTouch && this.galleryItems.length < 3) {\n            _loop = false;\n        }\n\n        if (!this.lgBusy) {\n            if (this.index > 0) {\n                this.index--;\n                this.LGel.trigger('onBeforePrevSlide.lg', {\n                    index: this.index,\n                    fromTouch,\n                });\n                this.slide(this.index, !!fromTouch, false, 'prev');\n            } else {\n                if (_loop) {\n                    this.index = this.galleryItems.length - 1;\n                    this.LGel.trigger('onBeforePrevSlide.lg', {\n                        index: this.index,\n                        fromTouch,\n                    });\n                    this.slide(this.index, !!fromTouch, false, 'prev');\n                } else if (this.s.slideEndAnimatoin && !fromTouch) {\n                    this.outer.addClass('lg-left-end');\n                    setTimeout(() => {\n                        this.outer.removeClass('lg-left-end');\n                    }, 400);\n                }\n            }\n        }\n    }\n\n    keyPress(): void {\n        if (this.galleryItems.length > 1) {\n            LG(window).on(`keyup.lg.global${this.lgId}`, (e) => {\n                if (this.lgOpened && this.galleryItems.length > 1) {\n                    if (e.keyCode === 37) {\n                        e.preventDefault();\n                        this.goToPrevSlide();\n                    }\n\n                    if (e.keyCode === 39) {\n                        e.preventDefault();\n                        this.goToNextSlide();\n                    }\n                }\n            });\n        }\n\n        LG(window).on(`keydown.lg.global${this.lgId}`, (e) => {\n            if (this.lgOpened && this.s.escKey === true && e.keyCode === 27) {\n                e.preventDefault();\n                if (!this.outer.hasClass('lg-thumb-open')) {\n                    this.destroy();\n                } else {\n                    this.outer.removeClass('lg-thumb-open');\n                }\n            }\n        });\n    }\n\n    arrow(): void {\n        LG(`#${this.getById('lg-prev')}`).on('click.lg', () => {\n            this.goToPrevSlide();\n        });\n        console.log(LG(`#${this.getById('lg-next')}`));\n        LG(`#${this.getById('lg-next')}`).on('click.lg', () => {\n            console.log('calling');\n            this.goToNextSlide();\n        });\n    }\n\n    arrowDisable(index: number): void {\n        // Disable arrows if s.hideControlOnEnd is true\n        if (!this.s.loop && this.s.hideControlOnEnd) {\n            const $prev = LG(`#${this.getById('lg-prev')}`);\n            const $next = LG(`#${this.getById('lg-next')}`);\n            if (index + 1 < this.galleryItems.length) {\n                $prev.removeAttr('disabled').removeClass('disabled');\n            } else {\n                $prev.attr('disabled', 'disabled').addClass('disabled');\n            }\n\n            if (index > 0) {\n                $next.removeAttr('disabled').removeClass('disabled');\n            } else {\n                $next.attr('disabled', 'disabled').addClass('disabled');\n            }\n        }\n    }\n\n    /**\n     * Get index of the slide from custom slideName. Has to be a public method. Used in hash plugin\n     * @param {String} hash\n     * @returns {Number} Index of the slide.\n     */\n    getIndexFromUrl(hash = window.location.hash): number {\n        const slideName = hash.split('&slide=')[1];\n        let _idx = 0;\n\n        if (this.s.customSlideName) {\n            for (let index = 0; index < this.galleryItems.length; index++) {\n                const dynamicEl = this.galleryItems[index];\n                if (dynamicEl.slideName === slideName) {\n                    _idx = index;\n                    break;\n                }\n            }\n        } else {\n            _idx = parseInt(slideName, 10);\n        }\n\n        return isNaN(_idx) ? 0 : _idx;\n    }\n\n    setTranslate(\n        $el: lgQuery,\n        xValue: number,\n        yValue: number,\n        scaleX = 1,\n        scaleY = 1,\n    ): void {\n        // jQuery supports Automatic CSS prefixing since version 1.8.0\n        if (this.s.useLeft) {\n            $el.css('left', xValue + '');\n        } else {\n            $el.css(\n                'transform',\n                'translate3d(' +\n                    xValue +\n                    'px, ' +\n                    yValue +\n                    'px, 0px) scale3d(' +\n                    scaleX +\n                    ', ' +\n                    scaleY +\n                    ', 1)',\n            );\n        }\n    }\n\n    mousewheel(): void {\n        this.outer.on('mousewheel.lg', (e) => {\n            if (!e.deltaY) {\n                return;\n            }\n\n            if (e.deltaY > 0) {\n                this.goToPrevSlide();\n            } else {\n                this.goToNextSlide();\n            }\n\n            e.preventDefault();\n        });\n    }\n\n    closeGallery(): void {\n        if (!this.s.closable) return;\n        let mousedown = false;\n        LG(`#${this.getById('lg-close')}`).on('click.lg', () => {\n            this.destroy();\n        });\n\n        if (this.s.closeOnTap) {\n            // If you drag the slide and release outside gallery gets close on chrome\n            // for preventing this check mousedown and mouseup happened on .lg-item or lg-outer\n            this.outer.on('mousedown.lg', (e) => {\n                const target = LG(e.target);\n                if (\n                    target.hasClass('lg-outer') ||\n                    target.hasClass('lg-item') ||\n                    target.hasClass('lg-img-wrap')\n                ) {\n                    mousedown = true;\n                } else {\n                    mousedown = false;\n                }\n            });\n\n            this.outer.on('mousemove.lg', () => {\n                mousedown = false;\n            });\n\n            this.outer.on('mouseup.lg', (e) => {\n                const target = LG(e.target);\n                if (\n                    target.hasClass('lg-outer') ||\n                    target.hasClass('lg-item') ||\n                    (target.hasClass('lg-img-wrap') && mousedown)\n                ) {\n                    if (!this.outer.hasClass('lg-dragging')) {\n                        this.destroy();\n                    }\n                }\n            });\n        }\n    }\n\n    destroy(clear?: boolean): void {\n        if (!clear && !this.s.closable) {\n            return;\n        }\n        if (!clear) {\n            this.LGel.trigger('onBeforeClose.lg');\n            LG(window).scrollTop(this.prevScrollTop);\n        }\n\n        const $backdrop = LG(`#${this.getById('lg-backdrop')}`);\n\n        let transform: string | undefined;\n        if (!this.s.dynamic) {\n            const imageSize = utils.getSize(this.items[this.index]);\n            transform = utils.getTransform(this.items[this.index], imageSize);\n        }\n        if (this.zoomFromImage && transform) {\n            this.outer.addClass('lg-closing lg-zoom-from-image');\n            this.getSlideItem(this.index)\n                .addClass('start-end-progress')\n                .css(\n                    'transition-duration',\n                    this.s.startAnimationDuration + 'ms',\n                )\n                .css('transform', transform);\n        } else {\n            this.outer.addClass('lg-hide-items');\n            // lg-zoom-from-image is used for setting the opacity to 1 if zoomFromImage is true\n            // If the closing item doesn't have the lg-size attribute, remove this class to avoid the closing css conflicts\n            this.outer.removeClass('lg-zoom-from-image');\n        }\n        /**\n         * if d is false or undefined destroy will only close the gallery\n         * plugins instance remains with the element\n         *\n         * if d is true destroy will completely remove the plugin\n         */\n\n        // Unbind all events added by lightGallery\n        // @todo\n        //this.$el.off('.lg.tm');\n\n        for (const key in this.modules) {\n            if (this.modules[key]) {\n                try {\n                    this.modules[key].destroy(clear);\n                } catch (err) {\n                    console.warn(\n                        `lightGallery:- make sure lightGallery ${key} module is properly destroyed`,\n                    );\n                }\n            }\n        }\n\n        if (clear) {\n            if (!this.s.dynamic) {\n                // only when not using dynamic mode is $items a jquery collection\n                for (let index = 0; index < this.items.length; index++) {\n                    const element = this.items[index];\n\n                    // Using different namespace for click because click event should not unbind if selector is same object('this')\n                    LG(element).off(`click.lgcustom-item-${index}`);\n                }\n            }\n            LG(window).off(`.lg.global${this.lgId}`);\n            this.LGel.off('.lg');\n        }\n\n        this.lGalleryOn = false;\n        this.zoomFromImage = this.s.zoomFromImage;\n\n        clearTimeout(this.hideBarTimeout);\n        this.hideBarTimeout = false;\n        LG(document.body).removeClass('lg-on lg-from-hash');\n\n        this.outer.removeClass('lg-visible');\n\n        // Resetting opacity to 0 isd required as  vertical swipe to close function adds inline opacity.\n        $backdrop.removeClass('in').css('opacity', 0);\n\n        const removeTimeout =\n            this.zoomFromImage && transform\n                ? Math.max(\n                      this.s.startAnimationDuration,\n                      this.s.backdropDuration,\n                  )\n                : this.s.backdropDuration;\n        LG(`#${this.getById('lg-container')}`).removeClass('lg-show-in');\n\n        // Once the closign animation is completed and gallery is invisible\n        setTimeout(() => {\n            if (this.zoomFromImage && transform) {\n                this.outer.removeClass('lg-zoom-from-image');\n            }\n            LG(`#${this.getById('lg-container')}`).removeClass('lg-show');\n            $backdrop.removeAttr('style');\n\n            this.outer.removeClass(`lg-closing ${this.s.startClass}`);\n\n            this.getSlideItem(this.index).removeClass('start-end-progress');\n            LG(`#${this.getById('lg-inner')}`).empty();\n\n            if (clear) {\n                if (this.outer) {\n                    this.outer.remove();\n                }\n\n                $backdrop.remove();\n            }\n            if (!clear) {\n                this.LGel.trigger('onCloseAfter.lg');\n            }\n            this.LGel.get().focus();\n\n            this.lgOpened = false;\n        }, removeTimeout + 100);\n    }\n}\n\n// $.fn.lightGallery = function (options) {\n//     return this.each(function () {\n//         if (!$.data(this, 'lightGallery')) {\n//             $.data(this, 'lightGallery', new LightGallery(this, options));\n//         } else {\n//             try {\n//                 $(this).data('lightGallery').init();\n//             } catch (err) {\n//                 console.error('lightGallery has not initiated properly');\n//             }\n//         }\n//     });\n// };\nwindow.lightGallery = function (el, options) {\n    if (!el) {\n        return;\n    }\n    try {\n        return new LightGallery(el, options);\n    } catch (err) {\n        console.error('lightGallery has not initiated properly', err);\n    }\n};\n"],"names":[],"mappings":"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"}