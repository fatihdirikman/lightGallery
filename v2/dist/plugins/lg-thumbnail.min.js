/**
 * lightgallery | 0.0.0 | December 24th 2020
 * http://sachinchoolur.github.io/lightGallery/
 * Copyright (c) 2020 Sachin Neravath;
 * @license GPLv3
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.lgThumbnail={})}(this,function(t){"use strict";var e={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbHeight:"80px",thumbContHeight:100,thumbMargin:5,exThumbImage:!1,showThumbByDefault:!0,toggleThumb:!0,pullCaptionUp:!0,enableThumbDrag:!0,enableThumbSwipe:!0,swipeThreshold:10,loadYoutubeThumbnail:!0,youtubeThumbSize:1,loadVimeoThumbnail:!0,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:!0},h=window.LG,i=(s.prototype.init=function(){var t=this;this.getThumbnails(),this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.galleryItems.length*(this.s.thumbWidth+this.s.thumbMargin),this.translateX=0,this.setAnimateThumbStyles(),this.s.thumbnail&&1<this.core.galleryItems.length&&(this.s.showThumbByDefault&&setTimeout(function(){t.core.outer.addClass("lg-thumb-open")},700),this.s.pullCaptionUp&&this.core.outer.addClass("lg-pull-caption-up"),this.build(),this.s.animateThumb&&this.core.doCss()?(this.s.enableThumbDrag&&this.enableThumbDrag(),this.s.enableThumbSwipe&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toggleThumbBar(),this.thumbKeyPress())},s.prototype.build=function(){var i=this;this.setThumbMarkup();var t=this.core.outer.find(".lg-thumb-item");this.loadVimeoThumbs(t,this.s.vimeoThumbSize),this.manageActiveClas(),this.$lgThumb.first().on("click.lg touchend.lg",function(t){var e=h(t.target);e.hasAttribute("data-lg-item-id")&&setTimeout(function(){var t;(!i.thumbClickable||i.core.lgBusy)&&i.core.doCss()||(t=parseInt(e.attr("data-lg-item-id")),console.log(t,e.attr("data-lg-item-id")),i.core.slide(t,!1,!0,!1))},50)}),h(this.core.el).on("onBeforeSlide.lg-tm",function(t){console.log(t,t.detail),i.animateThumb(i.core.index)}),this.core.LGel.on("appendSlides.lg-tm",function(t){i.addNewThumbnails(t.detail.items)}),h(window).on("resize.lg.thumb orientationchange.lg.thumb",function(){i.core.lgOpened&&setTimeout(function(){i.animateThumb(i.core.index),i.thumbOuterWidth=window.innerWidth},200)})},s.prototype.setThumbMarkup=function(){this.core.outer.addClass("lg-has-thumb"),this.core.outer.find(".lg").append('<div class="lg-thumb-outer">\n        <div class="lg-thumb lg-group">\n        </div>\n        </div>'),this.$thumbOuter=this.core.outer.find(".lg-thumb-outer").first(),this.$lgThumb=this.core.outer.find(".lg-thumb").first(),this.thumbOuterWidth=window.innerWidth,this.s.animateThumb&&(this.core.outer.find(".lg-thumb").css("transition-duration",this.core.s.speed+"ms").css("width",this.thumbTotalWidth+"px").css("position","relative"),this.$thumbOuter.css("height",this.s.thumbContHeight+"px")),this.setThumbItemHtml(this.core.galleryItems)},s.prototype.enableThumbDrag=function(){var e=this,i={cords:{startX:0,endX:0},isMoved:!1,newTranslateX:0,startTime:new Date,endTime:new Date,touchMoveTime:0},s=!1;this.$thumbOuter.addClass("lg-grab"),this.core.outer.find(".lg-thumb").first().on("mousedown.lg.thumb",function(t){e.thumbTotalWidth>e.thumbOuterWidth&&(t.preventDefault(),i.cords.startX=t.pageX,i.startTime=new Date,e.thumbClickable=!1,s=!0,e.core.outer.get().scrollLeft+=1,--e.core.outer.get().scrollLeft,e.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing"))}),h(window).on("mousemove.lg.thumb",function(t){s&&(i.cords.endX=t.pageX,i=e.onThumbTouchMove(i))}),h(window).on("mouseup.lg.thumb",function(){i.isMoved?i=e.onThumbTouchEnd(i):e.thumbClickable=!0,s&&(s=!1,e.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab"))})},s.prototype.enableThumbSwipe=function(){var e=this,i={cords:{startX:0,endX:0},isMoved:!1,newTranslateX:0,startTime:new Date,endTime:new Date,touchMoveTime:0};this.$lgThumb.on("touchstart.lg",function(t){e.thumbTotalWidth>e.thumbOuterWidth&&(t.preventDefault(),i.cords.startX=t.targetTouches[0].pageX,e.thumbClickable=!1,i.startTime=new Date)}),this.$lgThumb.on("touchmove.lg",function(t){e.thumbTotalWidth>e.thumbOuterWidth&&(t.preventDefault(),i.cords.endX=t.targetTouches[0].pageX,i=e.onThumbTouchMove(i))}),this.$lgThumb.on("touchend.lg",function(){i.isMoved?i=e.onThumbTouchEnd(i):e.thumbClickable=!0})},s.prototype.addNewThumbnails=function(t){this.appendThumbItems(t),this.thumbTotalWidth=this.core.galleryItems.length*(this.s.thumbWidth+this.s.thumbMargin),this.$lgThumb.css("width",this.thumbTotalWidth+"px"),this.manageActiveClas(),this.animateThumb(this.core.index)},s.prototype.appendThumbItems=function(t){this.setThumbItemHtml(t)},s.prototype.setTranslate=function(t){this.$lgThumb.css("transform","translate3d(-"+t+"px, 0px, 0px)")},s.prototype.getPossibleTransformX=function(t){return t>this.thumbTotalWidth-this.thumbOuterWidth&&(t=this.thumbTotalWidth-this.thumbOuterWidth),t<0&&(t=0),t},s.prototype.animateThumb=function(t){if(this.$lgThumb.css("transition-duration",this.core.s.speed+"ms"),this.s.animateThumb){var e=0;switch(this.s.currentPagerPosition){case"left":e=0;break;case"middle":e=this.thumbOuterWidth/2-this.s.thumbWidth/2;break;case"right":e=this.thumbOuterWidth-this.s.thumbWidth}this.translateX=(this.s.thumbWidth+this.s.thumbMargin)*t-1-e,this.translateX>this.thumbTotalWidth-this.thumbOuterWidth&&(this.translateX=this.thumbTotalWidth-this.thumbOuterWidth),this.translateX<0&&(this.translateX=0),this.core.lGalleryOn?this.core.doCss()||this.$lgThumb.animate({left:-this.translateX+"px"},this.core.s.speed):this.core.doCss()||this.$lgThumb.css("left",-this.translateX+"px"),this.setTranslate(this.translateX)}},s.prototype.onThumbTouchMove=function(t){return t.newTranslateX=this.translateX,t.isMoved=!0,t.touchMoveTime=(new Date).valueOf(),t.newTranslateX-=t.cords.endX-t.cords.startX,t.newTranslateX=this.getPossibleTransformX(t.newTranslateX),this.setTranslate(t.newTranslateX),this.$thumbOuter.addClass("lg-dragging"),t},s.prototype.onThumbTouchEnd=function(t){t.isMoved=!1,t.endTime=new Date,this.$thumbOuter.removeClass("lg-dragging");var e=t.endTime.valueOf()-t.startTime.valueOf(),i=t.cords.endX-t.cords.startX,e=Math.abs(i)/e;return.15<e&&t.endTime.valueOf()-t.touchMoveTime<30?(2<(e+=1)&&(e+=1),e+=e*(Math.abs(i)/this.thumbOuterWidth),this.$lgThumb.css("transition-duration",Math.min(e-1,2)+"s"),i*=e,this.translateX=this.getPossibleTransformX(this.translateX-i),this.setTranslate(this.translateX)):this.translateX=t.newTranslateX,Math.abs(t.cords.endX-t.cords.startX)<this.s.swipeThreshold&&(this.thumbClickable=!0),t},s.prototype.getVimeoErrorThumbSize=function(t){var e="";switch(t){case"thumbnail_large":e="640";break;case"thumbnail_medium":e="200x150";break;case"thumbnail_small":e="100x75"}return e},s.prototype.getThumbHtml=function(t,e){var i,s=this.core.galleryItems[e].__slideVideoInfo||{},h="";return s.youtube||s.vimeo||s.dailymotion?s.youtube?i=this.s.loadYoutubeThumbnail?"//img.youtube.com/vi/"+s.youtube[1]+"/"+this.s.youtubeThumbSize+".jpg":t:s.vimeo?this.s.loadVimeoThumbnail?(i="//i.vimeocdn.com/video/error_"+this.getVimeoErrorThumbSize(this.s.vimeoThumbSize)+".jpg",h=s.vimeo[1]):i=t:s.dailymotion&&(i=this.s.loadDailymotionThumbnail?"//www.dailymotion.com/thumbnail/video/"+s.dailymotion[1]:t):i=t,"<div "+(h?'data-vimeo-id="${vimeoId}"':"")+' data-lg-item-id="'+e+'" class="lg-thumb-item" \n        style="width:'+this.s.thumbWidth+"px; \n            height: "+this.s.thumbHeight+"; \n            margin-right: "+this.s.thumbMargin+'px">\n            <img data-lg-item-id="'+e+'" src="'+i+'" />\n        </div>'},s.prototype.setThumbItemHtml=function(t){for(var e="",i=0;i<t.length;i++)e+=this.getThumbHtml(t[i].thumb,i);this.$lgThumb.append(e)},s.prototype.getThumbnails=function(){for(var t=0;t<this.core.items.length;t++){var e=this.core.items[t],e=this.s.exThumbImage?h(e).attr(this.s.exThumbImage):h(e).find("img").first().attr("src");this.core.galleryItems[t].thumb=e}},s.prototype.loadVimeoThumbs=function(t,e){},s.prototype.setAnimateThumbStyles=function(){this.s.animateThumb&&(this.s.thumbHeight="100%",this.core.outer.addClass("lg-animate-thumb"))},s.prototype.manageActiveClas=function(){var t=this,e=this.core.outer.find(".lg-thumb-item");e.eq(this.core.index).addClass("active"),this.core.LGel.on("onBeforeSlide.lg.tm",function(){e.removeClass("active"),e.eq(t.core.index).addClass("active")})},s.prototype.toggleThumbBar=function(){var t=this;this.s.toggleThumb&&(this.core.outer.addClass("lg-can-toggle"),this.$thumbOuter.append('<button type="button aria-label="Toggle thumbnails" class="lg-toggle-thumb lg-icon"></button>'),this.core.outer.find(".lg-toogle-thumb").first().on("click.lg",function(){t.core.outer.toggleClass("lg-thumb-open")}))},s.prototype.thumbKeyPress=function(){var e=this;h(window).on("keydown.lg.thumb",function(t){e.core.lgOpened&&(38===t.keyCode?(t.preventDefault(),e.core.outer.addClass("lg-thumb-open")):40===t.keyCode&&(t.preventDefault(),e.core.outer.removeClass("lg-thumb-open")))})},s.prototype.destroy=function(){this.s.thumbnail&&1<this.core.galleryItems.length&&(h(window).off("lg.thumb"),this.$thumbOuter.remove(),this.core.outer.removeClass("lg-has-thumb"))},s);function s(t){return this.thumbOuterWidth=0,this.thumbTotalWidth=0,this.translateX=0,this.thumbClickable=!1,this.core=t,this.s=Object.assign({},e),this.init(),this}window.lgModules=window.lgModules||{},window.lgModules.thumbnail=i,t.Thumbnail=i,Object.defineProperty(t,"__esModule",{value:!0})});
