/**
 * lightgallery | 0.0.0 | December 24th 2020
 * http://sachinchoolur.github.io/lightGallery/
 * Copyright (c) 2020 Sachin Neravath;
 * @license GPLv3
 */

!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(e.lgVideo={})}(this,function(e){"use strict";var i={videoMaxWidth:"855px",autoplayFirstVideo:!0,youtubePlayerParams:!1,vimeoPlayerParams:!1,wistiaPlayerParams:!1,gotoNextSlideOnVideoEnd:!0,autoplayVideoOnSlide:!1,videojs:!1,videojsOptions:{}};function f(i){return Object.keys(i).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(i[e])}).join("&")}var o=(t.prototype.init=function(){var i=this;this.core.LGel.on("hasVideo.lg.tm",this.onHasVideo.bind(this)),this.core.LGel.on("onAferAppendSlide.lg.tm",this.onAferAppendSlide.bind(this)),console.log("calling video"),this.core.doCss()&&1<this.core.galleryItems.length&&(this.core.s.enableSwipe||this.core.s.enableDrag)?this.core.LGel.on("onSlideClick.lg.tm",function(){console.log("calling");var e=i.core.getSlideItem(i.core.index);i.loadVideoOnPosterClick(e)}):this.core.outer.find(".lg-item").first().on("click.lg",function(){var e=i.core.getSlideItem(i.core.index);i.loadVideoOnPosterClick(e)}),this.core.LGel.on("onBeforeSlide.lg.tm",this.onBeforeSlide.bind(this)),this.core.LGel.on("onAfterSlide.lg.tm",this.onAfterSlide.bind(this))},t.prototype.onHasVideo=function(e){var i=e.detail,o=i.index,t=i.src,e=i.html,i=i.hasPoster;console.log("calling has video"),i||(this.appendVideos(this.core.getSlideItem(o),{src:t,addClass:"lg-object",index:o,html5video:e}),this.gotoNextSlideOnVideoEnd(t,o)),this.s.autoplayFirstVideo&&!this.core.lGalleryOn&&(i?(i=this.core.getSlideItem(o),this.loadVideoOnPosterClick(i)):this.playVideo(o))},t.prototype.onAferAppendSlide=function(e){e=this.core.getSlideItem(e.detail.index).find(".lg-video-cont").first();e.hasClass("lg-has-iframe")||e.css("max-width",this.s.videoMaxWidth)},t.prototype.onBeforeSlide=function(e){var i=e.detail,e=i.prevIndex,i=i.index;this.pauseVideo(e);i=this.core.galleryItems[i].__slideVideoInfo||{};(i.youtube||i.vimeo||i.wistia)&&this.core.outer.addClass("lg-hide-download")},t.prototype.onAfterSlide=function(e){var i=this,o=e.detail,e=o.prevIndex,t=o.index;this.s.autoplayVideoOnSlide&&this.core.lGalleryOn&&(this.core.getSlideItem(e).removeClass("lg-video-playing"),setTimeout(function(){var e=i.core.getSlideItem(t);e.find(".lg-object").first().hasClass("lg-has-poster")?i.loadVideoOnPosterClick(e):i.playVideo(t)},100))},t.prototype.playVideo=function(e){this.controlVideo(e,"play")},t.prototype.pauseVideo=function(e){this.controlVideo(e,"pause")},t.prototype.getVideoHtml=function(e,i,o,t){var s="",l=this.core.galleryItems[o].__slideVideoInfo||{},r=this.core.galleryItems[o],d=(d=r.title||r.alt)?'title="'+d+'"':"",r='allowtransparency="true" \n            frameborder="0" \n            scrolling="no" \n            allowfullscreen \n            mozallowfullscreen \n            webkitallowfullscreen \n            oallowfullscreen \n            msallowfullscreen';if(l.youtube)var n="lg-youtube"+o,a="?wmode=opaque&autoplay=0&enablejsapi=1&"+f(this.s.youtubePlayerParams),s="<iframe id="+n+' class="lg-video-object lg-youtube '+i+'" '+d+' src="//www.youtube.com/embed/'+(l.youtube[1]+a)+'" '+r+"></iframe>";else if(l.vimeo){n="lg-vimeo"+o,a=f(this.s.vimeoPlayerParams);s="<iframe id="+n+' class="lg-video-object lg-vimeo '+i+'" '+d+' src="//player.vimeo.com/video/'+(l.vimeo[1]+a)+'" '+r+"></iframe>"}else if(l.wistia){o="lg-wistia"+o,a=f(this.s.wistiaPlayerParams);s='<iframe id="'+o+'" src="//fast.wistia.net/embed/iframe/'+(l.wistia[4]+a)+'" '+d+' class="wistia_embed lg-video-object lg-wistia '+i+'" name="wistia_embed" '+r+"></iframe>"}else if(l.html5){for(var c="",h=0;h<t.source.length;h++)c+='<source src="'+t.source[h].src+'" type="'+t.source[h].type+'">';var u="";Object.keys(t).forEach(function(e){"source"!==e&&(u+=e+'="'+t[e]+'" ')}),s='<video class="lg-video-object lg-html5 '+(this.s.videojs?"video-js":"")+'" '+u+">\n                "+c+"\n                Your browser does not support HTML5 video.\n            </video>"}return s},t.prototype.appendVideos=function(e,i){var o=this.getVideoHtml(i.src,i.addClass,i.index,i.html5video);e.find(".lg-video").append(o);var t=e.find(".lg-video-object").first();if(this.s.videojs)try{videojs(t.get(),this.s.videojsOptions)}catch(e){console.error("lightGallery:- Make sure you have included videojs")}this.core.LGel.trigger("onAppendVideo.lg",[t,i.index])},t.prototype.gotoNextSlideOnVideoEnd=function(e,i){var o=this,t=this.core.getSlideItem(i).find(".lg-video-object").first(),i=this.core.galleryItems[i].__slideVideoInfo||{};if(this.s.gotoNextSlideOnVideoEnd)if(i.html5)t.on("ended",function(){o.core.goToNextSlide()});else if(i.youtube)try{new YT.Player(t.attr("id"),{events:{onStateChange:function(e){e.data===YT.PlayerState.ENDED&&o.core.goToNextSlide()}}})}catch(e){console.error("lightGallery:- Make sure you have included https://www.youtube.com/iframe_api")}else if(i.vimeo)try{new Vimeo.Player(t.get()).on("ended",function(){o.core.goToNextSlide()})}catch(e){console.error("lightGallery:- Make sure you have included https://github.com/vimeo/player.js")}else if(i.wistia)try{window._wq=window._wq||[],window._wq.push({id:t.attr("id"),onReady:function(e){e.bind("end",function(){o.core.goToNextSlide()})}})}catch(e){console.error("lightGallery:- Make sure you have included //fast.wistia.com/assets/external/E-v1.js")}},t.prototype.controlVideo=function(e,i){var o=this.core.getSlideItem(e).find(".lg-video-object").first(),e=this.core.galleryItems[e].__slideVideoInfo||{};if(o)if(e.youtube)try{new YT.Player(o.attr("id"),{events:{onReady:function(e){e.target[i+"Video"]()}}})}catch(e){console.error("lightGallery:- Make sure you have included https://www.youtube.com/iframe_api")}else if(e.vimeo)try{new Vimeo.Player(o.get())[i]()}catch(e){console.error("lightGallery:- Make sure you have included https://github.com/vimeo/player.js")}else if(e.html5)if(this.s.videojs)try{videojs(o.get())[i]()}catch(e){console.error("lightGallery:- Make sure you have included videojs")}else o.get()[i]();else if(e.wistia)try{window._wq=window._wq||[],window._wq.push({id:o.attr("id"),onReady:function(e){e[i]()}})}catch(e){console.error("lightGallery:- Make sure you have included //fast.wistia.com/assets/external/E-v1.js")}},t.prototype.loadVideoOnPosterClick=function(e){var i,o;e.find(".lg-object").first().hasClass("lg-has-poster")&&"none"!==e.find(".lg-object").first().style().display&&(e.hasClass("lg-has-video")?(this.playVideo(this.core.index),e.addClass("lg-video-playing")):(e.addClass("lg-video-playing lg-has-video"),i=void 0,o=this.core.galleryItems[this.core.index].src,this.core.galleryItems[this.core.index].video&&(i=JSON.parse(this.core.galleryItems[this.core.index].video)),this.appendVideos(e,{src:o,addClass:"",index:this.core.index,html5video:i}),this.gotoNextSlideOnVideoEnd(o,this.core.index),this.playVideo(this.core.index),o=e.find(".lg-object").first().get(),e.find(".lg-video").first().append(o),e.find(".lg-video-object").first().hasClass("lg-html5")||(e.removeClass("lg-complete"),e.find(".lg-video-object").first().on("load.lg error.lg",function(){e.addClass("lg-complete")}))))},t);function t(e){return this.core=e,this.s=Object.assign({},i),this.init(),this}window.lgModules.video=o,e.Video=o,Object.defineProperty(e,"__esModule",{value:!0})});
