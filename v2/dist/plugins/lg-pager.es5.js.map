{"version":3,"file":"lg-pager.es5.js","sources":["../../src/plugins/pager/lg-pager.ts"],"sourcesContent":["import { DynamicItem } from '../../lg-utils';\nimport { lgQuery } from '../../lgQuery';\nimport { LightGallery } from '../../lightgallery';\n\ndeclare global {\n    interface Window {\n        LG: (selector: any) => lgQuery;\n    }\n}\n\nconst LG = window.LG;\n\nconst defaults = {\n    pager: true,\n};\n\nexport class Pager {\n    core: LightGallery;\n    s: { pager: boolean };\n    constructor(instance: LightGallery) {\n        // get lightGallery core plugin data\n        this.core = instance;\n        // extend module default settings with lightGallery core settings\n        this.s = Object.assign({}, defaults, this.core.s);\n\n        if (this.s.pager && this.core.galleryItems.length > 1) {\n            this.init();\n        }\n\n        return this;\n    }\n\n    getPagerHtml(items: DynamicItem[]): string {\n        let pagerList = '';\n        for (let i = 0; i < items.length; i++) {\n            pagerList += `<span  data-lg-item-id=\"${i}\" class=\"lg-pager-cont\"> \n                    <span data-lg-item-id=\"${i}\" class=\"lg-pager\"></span>\n                    <div class=\"lg-pager-thumb-cont\"><span class=\"lg-caret\"></span> <img src=\"${items[i].thumb}\" /></div>\n                    </span>`;\n        }\n        return pagerList;\n    }\n\n    init() {\n        let timeout: any;\n        this.core.outer\n            .find('.lg')\n            .append('<div class=\"lg-pager-outer\"></div>');\n\n        const $pagerOuter = this.core.outer.find('.lg-pager-outer');\n\n        $pagerOuter.html(this.getPagerHtml(this.core.galleryItems));\n\n        // @todo enable click\n        $pagerOuter.first().on('click.lg touchend.lg', (event: MouseEvent) => {\n            const $target = LG(event.target);\n            if (!$target.hasAttribute('data-lg-item-id')) {\n                return;\n            }\n            const index = parseInt($target.attr('data-lg-item-id'));\n            this.core.slide(index, false, true, false);\n        });\n\n        $pagerOuter.first().on('mouseover.lg', () => {\n            clearTimeout(timeout);\n            $pagerOuter.addClass('lg-pager-hover');\n        });\n\n        $pagerOuter.first().on('mouseout.lg', () => {\n            timeout = setTimeout(() => {\n                $pagerOuter.removeClass('lg-pager-hover');\n            });\n        });\n\n        this.core.LGel.on('onBeforeSlide.lg.pager', (event) => {\n            const { index } = event.detail;\n            this.manageActiveClass.call(this, index);\n        });\n\n        this.core.LGel.on('appendSlides.lg.pager', (event) => {\n            const { items } = event.detail;\n            this.addNewPagers.call(this, items);\n        });\n    }\n\n    manageActiveClass(index: number) {\n        const $pagerCont = this.core.outer.find('.lg-pager-cont');\n        $pagerCont.removeClass('lg-pager-active');\n        $pagerCont.eq(index).addClass('lg-pager-active');\n    }\n\n    addNewPagers(items: DynamicItem[]): void {\n        this.core.outer\n            .find('.lg-pager-outer')\n            .append(this.getPagerHtml(items));\n    }\n    destroy(clear?: boolean): void {\n        if (clear) {\n            this.core.outer.find('.lg-pager-outer').remove();\n            this.core.LGel.off('.lg.pager');\n        }\n    }\n}\n\nwindow.lgModules = window.lgModules || {};\nwindow.lgModules.pager = Pager;\n"],"names":[],"mappings":"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"}