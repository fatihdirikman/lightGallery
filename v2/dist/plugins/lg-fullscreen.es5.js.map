{"version":3,"file":"lg-fullscreen.es5.js","sources":["../../src/plugins/fullscreen/lg-fullscreen.ts"],"sourcesContent":["import { lgQuery } from '../../lgQuery';\nimport { LightGallery } from '../../lightgallery';\n\ndeclare let document: any;\n\nconst defaults = {\n    fullScreen: true,\n};\n\ndeclare global {\n    interface Window {\n        LG: (selector: any) => lgQuery;\n    }\n}\n\nconst LG = window.LG;\n\nexport class FullScreen {\n    core: LightGallery;\n    s: { fullScreen: boolean };\n    constructor(instance: LightGallery) {\n        // get lightGallery core plugin data\n        this.core = instance;\n        // extend module default settings with lightGallery core settings\n        this.s = Object.assign({}, defaults, this.core.s);\n\n        this.init();\n\n        return this;\n    }\n\n    init(): void {\n        let fullScreen = '';\n        if (this.s.fullScreen) {\n            // check for fullscreen browser support\n            if (\n                !document.fullscreenEnabled &&\n                !document.webkitFullscreenEnabled &&\n                !document.mozFullScreenEnabled &&\n                !document.msFullscreenEnabled\n            ) {\n                return;\n            } else {\n                fullScreen =\n                    '<button type=\"button aria-label=\"Toggle fullscreen\" class=\"lg-fullscreen lg-icon\"></button>';\n                this.core.outer.find('.lg-toolbar').append(fullScreen);\n                this.fullScreen();\n            }\n        }\n    }\n\n    isFullScreen(): boolean {\n        return (\n            document.fullscreenElement ||\n            document.mozFullScreenElement ||\n            document.webkitFullscreenElement ||\n            document.msFullscreenElement\n        );\n    }\n\n    requestFullscreen(): void {\n        const el = document.documentElement;\n        if (el.requestFullscreen) {\n            el.requestFullscreen();\n        } else if (el.msRequestFullscreen) {\n            el.msRequestFullscreen();\n        } else if (el.mozRequestFullScreen) {\n            el.mozRequestFullScreen();\n        } else if (el.webkitRequestFullscreen) {\n            el.webkitRequestFullscreen();\n        }\n    }\n\n    exitFullscreen(): void {\n        if (document.exitFullscreen) {\n            document.exitFullscreen();\n        } else if (document.msExitFullscreen) {\n            document.msExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n            document.mozCancelFullScreen();\n        } else if (document.webkitExitFullscreen) {\n            document.webkitExitFullscreen();\n        }\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Using_full_screen_mode\n    fullScreen(): void {\n        LG(document).on(\n            `fullscreenchange.lg.global${this.core.lgId} \n            webkitfullscreenchange.lg.global${this.core.lgId} \n            mozfullscreenchange.lg.global${this.core.lgId} \n            MSFullscreenChange.lg.global${this.core.lgId}`,\n            () => {\n                if (!this.core.lgOpened) return;\n                this.core.outer.toggleClass('lg-fullscreen-on');\n            },\n        );\n\n        this.core.outer\n            .find('.lg-fullscreen')\n            .first()\n            .on('click.lg', () => {\n                if (this.isFullScreen()) {\n                    this.exitFullscreen();\n                } else {\n                    this.requestFullscreen();\n                }\n            });\n    }\n\n    destroy(clear?: boolean): void {\n        // exit from fullscreen if activated\n        if (this.isFullScreen()) {\n            this.exitFullscreen();\n        }\n        if (clear) {\n            LG(document).off(\n                `fullscreenchange.lg.global${this.core.lgId} \n                webkitfullscreenchange.lg.global${this.core.lgId} \n                mozfullscreenchange.lg.global${this.core.lgId} \n                MSFullscreenChange.lg.global${this.core.lgId}`,\n            );\n        }\n    }\n}\n\nwindow.lgModules = window.lgModules || {};\nwindow.lgModules.fullscreen = FullScreen;\n"],"names":[],"mappings":"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"}