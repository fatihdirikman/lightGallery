{"version":3,"file":"lg-fullscreen.umd.js","sources":["../../src/plugins/fullscreen/lg-fullscreen.ts"],"sourcesContent":["import { lgQuery } from '../../lgQuery';\nimport { LightGallery } from '../../lightgallery';\n\ndeclare let document: any;\n\nconst defaults = {\n    fullScreen: true,\n};\n\ndeclare global {\n    interface Window {\n        LG: (selector: any) => lgQuery;\n    }\n}\n\nconst LG = window.LG;\n\nexport class FullScreen {\n    core: LightGallery;\n    s: { fullScreen: boolean };\n    constructor(instance: LightGallery) {\n        // get lightGallery core plugin data\n        this.core = instance;\n        // extend module default settings with lightGallery core settings\n        this.s = Object.assign({}, defaults, this.core.s);\n\n        this.init();\n\n        return this;\n    }\n\n    init(): void {\n        let fullScreen = '';\n        if (this.s.fullScreen) {\n            // check for fullscreen browser support\n            if (\n                !document.fullscreenEnabled &&\n                !document.webkitFullscreenEnabled &&\n                !document.mozFullScreenEnabled &&\n                !document.msFullscreenEnabled\n            ) {\n                return;\n            } else {\n                fullScreen =\n                    '<button type=\"button aria-label=\"Toggle fullscreen\" class=\"lg-fullscreen lg-icon\"></button>';\n                this.core.outer.find('.lg-toolbar').append(fullScreen);\n                this.fullScreen();\n            }\n        }\n    }\n\n    isFullScreen(): boolean {\n        return (\n            document.fullscreenElement ||\n            document.mozFullScreenElement ||\n            document.webkitFullscreenElement ||\n            document.msFullscreenElement\n        );\n    }\n\n    requestFullscreen(): void {\n        const el = document.documentElement;\n        if (el.requestFullscreen) {\n            el.requestFullscreen();\n        } else if (el.msRequestFullscreen) {\n            el.msRequestFullscreen();\n        } else if (el.mozRequestFullScreen) {\n            el.mozRequestFullScreen();\n        } else if (el.webkitRequestFullscreen) {\n            el.webkitRequestFullscreen();\n        }\n    }\n\n    exitFullscreen(): void {\n        if (document.exitFullscreen) {\n            document.exitFullscreen();\n        } else if (document.msExitFullscreen) {\n            document.msExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n            document.mozCancelFullScreen();\n        } else if (document.webkitExitFullscreen) {\n            document.webkitExitFullscreen();\n        }\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Using_full_screen_mode\n    fullScreen(): void {\n        LG(document).on(\n            `fullscreenchange.lg.global${this.core.lgId} \n            webkitfullscreenchange.lg.global${this.core.lgId} \n            mozfullscreenchange.lg.global${this.core.lgId} \n            MSFullscreenChange.lg.global${this.core.lgId}`,\n            () => {\n                if (!this.core.lgOpened) return;\n                this.core.outer.toggleClass('lg-fullscreen-on');\n            },\n        );\n\n        this.core.outer\n            .find('.lg-fullscreen')\n            .first()\n            .on('click.lg', () => {\n                if (this.isFullScreen()) {\n                    this.exitFullscreen();\n                } else {\n                    this.requestFullscreen();\n                }\n            });\n    }\n\n    destroy(clear?: boolean): void {\n        // exit from fullscreen if activated\n        if (this.isFullScreen()) {\n            this.exitFullscreen();\n        }\n        if (clear) {\n            LG(document).off(\n                `fullscreenchange.lg.global${this.core.lgId} \n                webkitfullscreenchange.lg.global${this.core.lgId} \n                mozfullscreenchange.lg.global${this.core.lgId} \n                MSFullscreenChange.lg.global${this.core.lgId}`,\n            );\n        }\n    }\n}\n\nwindow.lgModules = window.lgModules || {};\nwindow.lgModules.fullscreen = FullScreen;\n"],"names":[],"mappings":"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"}