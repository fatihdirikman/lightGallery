{"version":3,"file":"lg-pager.umd.js","sources":["../../src/plugins/pager/lg-pager.ts"],"sourcesContent":["import { DynamicItem } from '../../lg-utils';\nimport { lgQuery } from '../../lgQuery';\nimport { LightGallery } from '../../lightgallery';\n\ndeclare global {\n    interface Window {\n        LG: (selector: any) => lgQuery;\n    }\n}\n\nconst LG = window.LG;\n\nconst defaults = {\n    pager: true,\n};\n\nexport class Pager {\n    core: LightGallery;\n    s: { pager: boolean };\n    constructor(instance: LightGallery) {\n        // get lightGallery core plugin data\n        this.core = instance;\n        // extend module default settings with lightGallery core settings\n        this.s = Object.assign({}, defaults, this.core.s);\n\n        if (this.s.pager && this.core.galleryItems.length > 1) {\n            this.init();\n        }\n\n        return this;\n    }\n\n    getPagerHtml(items: DynamicItem[]): string {\n        let pagerList = '';\n        for (let i = 0; i < items.length; i++) {\n            pagerList += `<span  data-lg-item-id=\"${i}\" class=\"lg-pager-cont\"> \n                    <span data-lg-item-id=\"${i}\" class=\"lg-pager\"></span>\n                    <div class=\"lg-pager-thumb-cont\"><span class=\"lg-caret\"></span> <img src=\"${items[i].thumb}\" /></div>\n                    </span>`;\n        }\n        return pagerList;\n    }\n\n    init() {\n        let timeout: any;\n        this.core.outer\n            .find('.lg')\n            .append('<div class=\"lg-pager-outer\"></div>');\n\n        const $pagerOuter = this.core.outer.find('.lg-pager-outer');\n\n        $pagerOuter.html(this.getPagerHtml(this.core.galleryItems));\n\n        // @todo enable click\n        $pagerOuter.first().on('click.lg touchend.lg', (event: MouseEvent) => {\n            const $target = LG(event.target);\n            if (!$target.hasAttribute('data-lg-item-id')) {\n                return;\n            }\n            const index = parseInt($target.attr('data-lg-item-id'));\n            this.core.slide(index, false, true, false);\n        });\n\n        $pagerOuter.first().on('mouseover.lg', () => {\n            clearTimeout(timeout);\n            $pagerOuter.addClass('lg-pager-hover');\n        });\n\n        $pagerOuter.first().on('mouseout.lg', () => {\n            timeout = setTimeout(() => {\n                $pagerOuter.removeClass('lg-pager-hover');\n            });\n        });\n\n        this.core.LGel.on('onBeforeSlide.lg.pager', (event) => {\n            const { index } = event.detail;\n            this.manageActiveClass.call(this, index);\n        });\n\n        this.core.LGel.on('appendSlides.lg.pager', (event) => {\n            const { items } = event.detail;\n            this.addNewPagers.call(this, items);\n        });\n    }\n\n    manageActiveClass(index: number): void {\n        const $pagerCont = this.core.outer.find('.lg-pager-cont');\n        $pagerCont.removeClass('lg-pager-active');\n        $pagerCont.eq(index).addClass('lg-pager-active');\n    }\n\n    addNewPagers(items: DynamicItem[]): void {\n        this.core.outer\n            .find('.lg-pager-outer')\n            .append(this.getPagerHtml(items));\n    }\n    destroy(clear?: boolean): void {\n        if (clear) {\n            this.core.outer.find('.lg-pager-outer').remove();\n            this.core.LGel.off('.lg.pager');\n        }\n    }\n}\n\nwindow.lgModules = window.lgModules || {};\nwindow.lgModules.pager = Pager;\n"],"names":[],"mappings":"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"}